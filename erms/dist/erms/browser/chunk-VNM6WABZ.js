import{fa as V,oa as G,qa as m,va as j,wa as M}from"./chunk-UN23QMYQ.js";import{$ as P,Fa as F,G as R,H as E,K as x,P as N,Q as _,T as $,V as k,Wa as U,Y as T,c as A,f as D,ra as h,sa as g,ua as f,w as p,wa as s,xa as v,y as I}from"./chunk-RKO2T376.js";import{a as l}from"./chunk-R6IFIPMG.js";var nt={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},S="__@ngrx/effects_create__";function Bt(t,e={}){let o=e.functional?t:t(),n=l(l({},nt),e);return Object.defineProperty(o,S,{value:n}),o}function rt(t){return Object.getOwnPropertyNames(t).filter(n=>t[n]&&t[n].hasOwnProperty(S)?t[n][S].hasOwnProperty("dispatch"):!1).map(n=>{let r=t[n][S];return l({propertyName:n},r)})}function ot(t){return rt(t)}function L(t){return Object.getPrototypeOf(t)}function st(t){return!!t.constructor&&t.constructor.name!=="Object"&&t.constructor.name!=="Function"}function K(t){return typeof t=="function"}function H(t){return t.filter(K)}function it(t){return t instanceof f||K(t)}function ct(t,e,o){let n=L(t),c=!!n&&n.constructor.name!=="Object"?n.constructor.name:null,i=ot(t).map(({propertyName:u,dispatch:a,useEffectsErrorHandler:C})=>{let d=typeof t[u]=="function"?t[u]():t[u],w=C?o(d,e):d;return a===!1?w.pipe(_()):w.pipe(P()).pipe(p(et=>({effect:t[u],notification:et,propertyName:u,sourceName:c,sourceInstance:t})))});return R(...i)}var ft=10;function Y(t,e,o=ft){return t.pipe(x(n=>(e&&e.handleError(n),o<=1?t:Y(t,e,o-1))))}var zt=(()=>{let e=class e extends A{constructor(n){super(),n&&(this.source=n)}lift(n){let r=new e;return r.source=this,r.operator=n,r}};e.\u0275fac=function(r){return new(r||e)(s(G))},e.\u0275prov=h({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Lt(...t){return E(e=>t.some(o=>typeof o=="string"?o===e.type:o.type===e.type))}var J=new f("@ngrx/effects Internal Root Guard"),y=new f("@ngrx/effects User Provided Effects"),O=new f("@ngrx/effects Internal Root Effects"),X=new f("@ngrx/effects Internal Root Effects Instances"),B=new f("@ngrx/effects Internal Feature Effects"),Z=new f("@ngrx/effects Internal Feature Effects Instance Groups"),ut=new f("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>Y}),q="@ngrx/effects/init",Kt=V(q);function at(t,e){if(t.notification.kind==="N"){let o=t.notification.value;!dt(o)&&e.handleError(new Error(`Effect ${lt(t)} dispatched an invalid action: ${pt(o)}`))}}function dt(t){return typeof t!="function"&&t&&t.type&&typeof t.type=="string"}function lt({propertyName:t,sourceInstance:e,sourceName:o}){let n=typeof e[t]=="function";return!!o?`"${o}.${String(t)}${n?"()":""}"`:`"${String(t)}()"`}function pt(t){try{return JSON.stringify(t)}catch{return t}}var Et="ngrxOnIdentifyEffects";function ht(t){return b(t,Et)}var gt="ngrxOnRunEffects";function vt(t){return b(t,gt)}var Ft="ngrxOnInitEffects";function mt(t){return b(t,Ft)}function b(t,e){return t&&e in t&&typeof t[e]=="function"}var Q=(()=>{let e=class e extends D{constructor(n,r){super(),this.errorHandler=n,this.effectsErrorHandler=r}addEffects(n){this.next(n)}toActions(){return this.pipe(T(n=>st(n)?L(n):n),I(n=>n.pipe(T(yt))),I(n=>{let r=n.pipe(k(i=>St(this.errorHandler,this.effectsErrorHandler)(i)),p(i=>(at(i,this.errorHandler),i.notification)),E(i=>i.kind==="N"&&i.value!=null),$()),c=n.pipe(N(1),E(mt),p(i=>i.ngrxOnInitEffects()));return R(r,c)}))}};e.\u0275fac=function(r){return new(r||e)(s(U),s(ut))},e.\u0275prov=h({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function yt(t){return ht(t)?t.ngrxOnIdentifyEffects():""}function St(t,e){return o=>{let n=ct(o,t,e);return vt(o)?o.ngrxOnRunEffects(n):n}}var W=(()=>{let e=class e{get isStarted(){return!!this.effectsSubscription}constructor(n,r){this.effectSources=n,this.store=r,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}};e.\u0275fac=function(r){return new(r||e)(s(Q),s(m))},e.\u0275prov=h({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),tt=(()=>{let e=class e{constructor(n,r,c,i,u,a,C){this.sources=n,r.start();for(let d of i)n.addEffects(d);c.dispatch({type:q})}addEffects(n){this.sources.addEffects(n)}};e.\u0275fac=function(r){return new(r||e)(s(Q),s(W),s(m),s(X),s(j,8),s(M,8),s(J,8))},e.\u0275mod=F({type:e}),e.\u0275inj=g({});let t=e;return t})(),It=(()=>{let e=class e{constructor(n,r,c,i){let u=r.flat();for(let a of u)n.addEffects(a)}};e.\u0275fac=function(r){return new(r||e)(s(tt),s(Z),s(j,8),s(M,8))},e.\u0275mod=F({type:e}),e.\u0275inj=g({});let t=e;return t})(),Yt=(()=>{let e=class e{static forFeature(...n){let r=n.flat(),c=H(r);return{ngModule:It,providers:[c,{provide:B,multi:!0,useValue:r},{provide:y,multi:!0,useValue:[]},{provide:Z,multi:!0,useFactory:z,deps:[B,y]}]}}static forRoot(...n){let r=n.flat(),c=H(r);return{ngModule:tt,providers:[c,{provide:O,useValue:[r]},{provide:J,useFactory:Rt},{provide:y,multi:!0,useValue:[]},{provide:X,useFactory:z,deps:[O,y]}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=F({type:e}),e.\u0275inj=g({});let t=e;return t})();function z(t,e){let o=[];for(let n of t)o.push(...n);for(let n of e)o.push(...n);return o.map(n=>it(n)?v(n):n)}function Rt(){let t=v(W,{optional:!0,skipSelf:!0}),e=v(O,{self:!0});if(!(e.length===1&&e[0].length===0)&&t)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}export{Bt as a,zt as b,Lt as c,Yt as d};
