import{c as G}from"./chunk-WA2TOHGR.js";import{a as De,b as ze,c as Qi,d as It}from"./chunk-Q3WA2DJP.js";import{a as Ki}from"./chunk-B4Z2DCNA.js";import{a as L,b as He,c as B,d as Mt}from"./chunk-34A255VX.js";import{$c as zt,$d as Rt,A as H,Ab as Pe,Ad as Xe,Bd as Bi,D as mi,Db as Ti,E as Ee,Eb as yt,G as xt,Gb as yi,Ic as Le,Jc as fe,Kc as Be,Lc as Ii,M as he,Mb as Ei,Nc as Ce,Nd as Ui,O as bt,Ob as Di,Oc as Vi,P as ge,Pc as ve,Q as J,Qc as _e,Rc as Se,S as Ve,Sc as xe,T as ke,U as hi,W as gi,X as fi,Xd as ji,Y as Ci,Yd as je,Z as vi,Zd as Je,_a as _i,_d as Ze,ad as ki,ae as Hi,bb as Si,bc as zi,be as Ot,ca as Z,cb as xi,ce as Yi,da as Tt,de as $i,eb as ie,ee as Gi,fa as w,fc as Ai,ga as V,ge as Wi,jc as wi,jd as Ni,kd as At,mc as Ri,nd as Pi,ne as qi,od as Fi,oe as $,pc as Oi,pd as Li,q as ue,qa as Y,s as me,ta as N,ua as ee,uc as Fe,v as Wt,wd as wt,xa as Ne,xc as Et,xd as Ue,ya as D,yb as bi,yc as Dt,za as te,zc as Mi}from"./chunk-HOMEJTDX.js";import{$b as a,Ac as Q,Dd as X,Ea as A,Ec as Oe,Ed as St,Fa as gt,Fc as Te,Ic as T,Jc as j,K as ne,Kc as le,Kd as Me,L as ai,Lc as ci,Ld as Ie,Mb as x,Mc as pi,Md as di,Nc as ye,Nd as de,Ob as m,Oc as F,Od as ui,Pa as g,Qa as f,Wb as re,Xb as ft,Zb as Ct,_b as vt,a as we,ac as o,bc as _,cc as oi,cd as pe,dc as si,fc as E,ia as mt,ic as v,kc as h,ma as O,oc as li,qb as Qe,qc as ae,r as k,ra as ce,rc as oe,sa as ht,sc as se,tb as c,tc as I,ub as C,uc as l,vc as R,w as U,wa as M,wc as b,x as ri,xc as _t,y as Re,yc as q,zc as K}from"./chunk-RKO2T376.js";import"./chunk-Z4ODKDNE.js";import{a as S,b as z,f as Ke,h as be}from"./chunk-R6IFIPMG.js";var qt=Ke(Xe());var Kn=()=>({x:"1150px"});function Qn(i,n){if(i&1&&_(0,"app-status-label",21),i&2){let s=h().$implicit,t=h();m("label",t.convertStatus(t.getOrderStatusLatest(s)))("statusType",t.getOrderStatusLatest(s))}}function Xn(i,n){i&1&&l(0," UNKNOWN ")}function Jn(i,n){if(i&1){let s=E();a(0,"tr",20),v("click",function(e){let r=g(s).$implicit,p=h();return e.stopPropagation(),f(p.onSelectDetail(r))}),a(1,"td",10),l(2),o(),a(3,"td",11),l(4),T(5,"date"),o(),a(6,"td",12),l(7),o(),a(8,"td",13),l(9),o(),a(10,"td",14),l(11),o(),a(12,"td",15),l(13),T(14,"currency"),o(),a(15,"td",16),l(16),T(17,"currency"),o(),a(18,"td",17),l(19),o(),a(20,"td",18),x(21,Qn,1,2,"app-status-label",21)(22,Xn,1,0),o()()}if(i&2){let s,t=n.$implicit,e=n.index,r=h();c(2),R((s=t.code)!==null&&s!==void 0?s:e+1),c(2),R(le(5,9,t.startDate,"dd/MM/yyyy hh:mm a")),c(3),R(t.user.userName),c(2),R(t.recipientPhoneNumber),c(2),b(" ",r.convertRentalDay(t.startDate,t.endDate)," ng\xE0y "),c(2),b(" ",le(14,12,t.totalDepositPrice,"VND")," "),c(3),b(" ",le(17,15,t.totalRentPrice,"VND")," "),c(3),R(t.note),c(2),re(21,t.orderStatuses.length!==0?21:22)}}function Zn(i,n){if(i&1&&(a(0,"div",22),l(1),T(2,"async"),T(3,"async"),o()),i&2){let s=h();c(),_t(" Hi\u1EC3n th\u1ECB th\u1EE9 t\u1EF1 1- ",j(2,2,s.pageSize$)," trong ",j(3,4,s.pageTotal$)," k\u1EBFt qu\u1EA3 ")}}var Ji=(()=>{let n=class n{handleChooseViewCell(t){this.customColumn=this.customColumn.map((e,r)=>z(S({},e),{default:t[r].checked}))}getOrderStatusLatest(t){return t.orderStatuses.reduce((e,r)=>Math.max(e,r.status),-1/0)}convertRentalDay(t,e){let r=new Date(t),p=new Date(e);return this.timerCalculatorService.convertRentalDays([r,p])}convertStatus(t){return zt(t)}onSelectDetail(t){console.log("data",t),this.router.navigateByUrl(`lessor/order/${t.id}`)}onSubmitForm(t){let{orderCode:e,orderStatus:r,humanRental:p,phoneNumber:d,timeRange:u}=t,y=u&&u.length!==0?(0,qt.default)(u[0]).format("YYYY-MM-DD"):null,W=u&&u.length!==0?(0,qt.default)(u[1]).format("YYYY-MM-DD"):null;this.onloadOrder({pageIndex:1,pageSize:10,orderCode:e,status:r,phoneNumber:d,renterName:p,startDate:y,endDate:W}),this.navigateService.updateParams({pageIndex:1,pageSize:10,orderStatus:r,phoneNumber:d,humanRental:p})}onPageSizeChange(t){this.onloadOrder({pageSize:t}),this.navigateService.updateParams({pageIndex:t})}onPageIndexChange(t){this.onloadOrder({pageIndex:t}),this.navigateService.updateParams({pageIndex:t})}onloadOrder(t){return be(this,null,function*(){this.loadingSerivce.setLoading(),this.subscription=this.orderService.listOrderLessor(t??{}).subscribe({next:e=>{let{data:{items:r,pageIndex:p,pageSize:d,totalCount:u}}=e;this.listData=r,this.pageIndex$=k(p),this.pageTotal$=k(u),this.pageSize$=k(d),this.loadingSerivce.setOtherLoading("loaded")},error:e=>{this.loadingSerivce.setOtherLoading("error"),console.error("Order loading error:",e)}})})}onQueryParams(){this.route.paramMap.pipe(U(t=>({pageIndex:+(t.get("pageIndex")??"1"),pageSize:+(t.get("pageSize")??"10"),orderStatus:t.get("orderStatus"),phoneNumber:t.get("phoneNumber"),humanRental:t.get("renter")})),O(t=>{this.navigateService.updateParams(t)}),mt(t=>this.onloadOrder(t))).subscribe()}constructor(t,e,r,p,d,u,y){this.route=t,this.router=e,this.navigateService=r,this.orderService=p,this.loadingSerivce=d,this.timerCalculatorService=u,this.cdRef=y,this.listData=[],this.pageIndex$=k(1),this.pageSize$=k(10),this.customColumn=[{name:"M\xE3 \u0111\u01A1n h\xE0ng",value:"maDonHang",default:!0,position:"left",width:200,fixWidth:!0},{name:"Ng\xE0y t\u1EA1o",value:"ngayTao",default:!0,position:"left",width:200,fixWidth:!0},{name:"Ng\u01B0\u1EDDi thu\xEA",value:"nguoiThue",default:!0,position:"left",width:200,fixWidth:!0},{name:"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i",value:"soDienThoai",default:!0,position:"left",width:200,fixWidth:!0},{name:"Th\u1EDDi gian thu\xEA",value:"thoiGianThue",default:!0,position:"left",width:200,fixWidth:!0},{name:"Gi\xE1 c\u1ECDc",value:"giaCoc",default:!0,position:"left",width:200,fixWidth:!0},{name:"T\u1ED5ng ti\u1EC1n",value:"tongTien",default:!0,position:"left",width:200,fixWidth:!0},{name:"N\u1ED9i dung",value:"noiDung",default:!0,position:"left",width:200,fixWidth:!0},{name:"Tr\u1EA1ng th\xE1i \u0111\u01A1n h\xE0ng",value:"trangThaiDonHang",default:!0,position:"left",width:200,fixWidth:!0},{name:"Tr\u1EA1ng th\xE1i thanh to\xE1n",value:"trangThaiThanhToan",default:!0,position:"left",width:200,fixWidth:!0}]}ngOnInit(){this.onQueryParams()}ngOnDestroy(){this.subscription?.unsubscribe()}};n.\u0275fac=function(e){return new(e||n)(C(ue),C(me),C(It),C(Ue),C($),C(wt),C(pe))},n.\u0275cmp=A({type:n,selectors:[["app-manage-order"]],decls:40,vars:18,consts:[["basicTable",""],["showTotal",""],[1,"p-5","my-3","bg-white","rounded-md"],[1,"text-xl","text-[#111]"],[1,"py-3"],[3,"resetLoad","formValueFilter"],[1,"flex","items-center","justify-start","gap-x-2","pb-3"],[1,"font-medium"],[3,"handleChooseCell"],["nzFrontPagination","false","nzShowSizeChanger","true",3,"nzPageIndexChange","nzPageSizeChange","nzCustomColumn","nzScroll","nzData","nzBordered","nzPaginationPosition","nzShowPagination","nzShowTotal","nzPageIndex","nzTotal","nzPageSize"],["nzCellControl","maDonHang"],["nzCellControl","ngayTao"],["nzCellControl","nguoiThue"],["nzCellControl","soDienThoai"],["nzCellControl","thoiGianThue"],["nzCellControl","giaCoc"],["nzCellControl","tongTien"],["nzCellControl","noiDung"],["nzCellControl","trangThaiDonHang","nzRight",""],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[3,"label","statusType"],[1,"text-[14px]","font-medium","text-[#333]"]],template:function(e,r){if(e&1){let p=E();a(0,"div",2)(1,"h3",3),l(2,"Danh s\xE1ch y\xEAu c\u1EA7u thu\xEA"),o(),a(3,"section",4)(4,"app-form-order",5),v("resetLoad",function(){return g(p),f(r.onloadOrder())})("formValueFilter",function(u){return g(p),f(r.onSubmitForm(u))}),o()()(),a(5,"div",2)(6,"div",6)(7,"p",7),l(8,"D\u1EEF li\u1EC7u hi\u1EC3n th\u1ECB"),o(),a(9,"app-header-table",8),v("handleChooseCell",function(u){return g(p),f(r.handleChooseViewCell(u))}),o()(),a(10,"section")(11,"nz-table",9,0),T(13,"async"),T(14,"async"),T(15,"async"),v("nzPageIndexChange",function(u){return g(p),f(r.onPageIndexChange(u))})("nzPageSizeChange",function(u){return g(p),f(r.onPageSizeChange(u))}),a(16,"thead")(17,"tr")(18,"th",10),l(19,"M\xE3 \u0111\u01A1n h\xE0ng"),o(),a(20,"th",11),l(21,"Ng\xE0y t\u1EA1o"),o(),a(22,"th",12),l(23,"Ng\u01B0\u1EDDi thu\xEA"),o(),a(24,"th",13),l(25,"S\u1ED1 \u0111i\u1EC7n tho\u1EA1i"),o(),a(26,"th",14),l(27,"Th\u1EDDi gian thu\xEA"),o(),a(28,"th",15),l(29,"Gi\xE1 c\u1ECDc"),o(),a(30,"th",16),l(31,"T\u1ED5ng ti\u1EC1n"),o(),a(32,"th",17),l(33,"N\u1ED9i dung"),o(),a(34,"th",18),l(35,"Tr\u1EA1ng th\xE1i \u0111\u01A1n h\xE0ng"),o()()(),a(36,"tbody"),x(37,Jn,23,18,"tr",19),o()()()(),x(38,Zn,4,6,"ng-template",null,1,F)}if(e&2){let p,d,u,y=I(12),W=I(39);c(11),m("nzCustomColumn",r.customColumn)("nzScroll",Oe(17,Kn))("nzData",r.listData)("nzBordered",!0)("nzPaginationPosition","bottom")("nzShowPagination",!0)("nzShowTotal",W)("nzPageIndex",(p=j(13,11,r.pageIndex$))!==null&&p!==void 0?p:1)("nzTotal",(d=j(14,13,r.pageTotal$))!==null&&d!==void 0?d:0)("nzPageSize",(u=j(15,15,r.pageSize$))!==null&&u!==void 0?u:10),c(26),m("ngForOf",y.data)}},dependencies:[X,_e,fe,Ce,xe,ve,Se,Le,Be,At,Ui,Pi,Me,de,Ie],styles:[".limited-text[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;width:200px}  .ant-table-pagination.ant-pagination ul{display:flex;width:100%}  .ant-pagination-total-text{flex:1}"]});let i=n;return i})();var Qt={errMessage:"",message:"",orderDetail:null,status:"idle"},tr=te(Qt,D(je,(i,n)=>z(S({},Qt),{status:"loading"})),D(Je,(i,n)=>z(S({},i),{orderDetail:n.data,message:n.message,status:"loaded"})),D(Ze,(i,n)=>z(S({},i),{errMessage:n.errMessage,status:"error"})),D(Rt,()=>S({},Qt))),Xt=ee({name:ie.orderDetailFeature,reducer:tr,extraSelectors:({selectOrderDetail:i})=>({selectTotalQuantity:N(i,n=>Array.isArray(n?.orderDetails)?n.orderDetails.reduce((s,t)=>t.quantity+s,0):0)})}),{selectOrderDetail:Zi,selectTotalQuantity:en}=Xt;var kt=i=>[i,"VND","VND","1.0-0","vi"];function ir(i,n){if(i&1){let s=E();a(0,"button",22),v("click",function(){g(s);let e=h(2),r=I(3);return f(e.popUpChangeStatus(r))}),l(1),o()}if(i&2){let s=h().ngIf,t=h();c(),b(" ",t.convertTextButton(t.getOrderStatusLatest(s))," ")}}function nr(i,n){if(i&1){let s=E();a(0,"button",23),v("click",function(){g(s);let e=h(2);return f(e.popUpCancelOrderStatus())}),l(1," H\u1EE7y y\xEAu c\u1EA7u "),o()}}function rr(i,n){if(i&1){let s=E();a(0,"tr")(1,"td")(2,"label",24),v("ngModelChange",function(){g(s);let e=h(2);return f(e.onItemChecked())}),o()(),a(3,"td")(4,"div",25),_(5,"img",26),o()(),a(6,"td")(7,"tr",27)(8,"td",28),l(9," T\xEAn s\u1EA3n ph\u1EA9m "),o(),a(10,"td",10),l(11),o()(),a(12,"tr",27)(13,"td",28),l(14," S\u1ED1 l\u01B0\u1EE3ng: "),o(),a(15,"td",10),l(16),o()(),a(17,"tr",27)(18,"td",28),l(19," Ti\u1EC1n c\u1ECDc: "),o(),a(20,"td",10),l(21),T(22,"currency"),o()()()()}if(i&2){let s=n.$implicit,t=n.index;c(5),li("alt","product-image + ",t,".png"),m("src",s.product.productImages[0].link,Qe),c(6),b(" ",s.product.productName," "),c(5),b(" ",s.quantity," "),c(5),b(" ",ye(22,6,Te(12,kt,s.product.depositPrice))," ")}}function ar(i,n){if(i&1){let s=E();oi(0),a(1,"div",3)(2,"h3",4),l(3," \u0110\u01A1n thu\xEA "),a(4,"strong"),l(5),o()()(),a(6,"div",5)(7,"section",6)(8,"h4",7),l(9,"Th\xF4ng tin \u0111\u01A1n h\xE0ng"),o(),a(10,"table",8)(11,"tbody")(12,"tr")(13,"td",9),l(14,"Ng\u01B0\u1EDDi thu\xEA"),o(),a(15,"td",10),l(16),o()(),a(17,"tr")(18,"td",9),l(19," S\u1ED1 \u0111i\u1EC7n tho\u1EA1i "),o(),a(20,"td",10),l(21),o()(),a(22,"tr")(23,"td",9),l(24,"Email"),o(),a(25,"td",10),l(26),o()(),a(27,"tr")(28,"td",9),l(29,"Ng\xE0y t\u1EA1o"),o(),a(30,"td",10),l(31),T(32,"date"),o()(),a(33,"tr")(34,"td",9),l(35,"Thu\xEA"),o(),a(36,"td",10),l(37),o()(),a(38,"tr")(39,"td",9),l(40,"M\xE3 \u0111\u01A1n h\xE0ng"),o(),a(41,"td",10),l(42),o()(),a(43,"tr")(44,"td",9),l(45," S\u1ED1 l\u01B0\u1EE3ng s\u1EA3n ph\u1EA9m thu\xEA "),o(),a(46,"td",10),l(47),T(48,"async"),o()(),a(49,"tr")(50,"td",9),l(51,"Ti\u1EC1n c\u1ECDc"),o(),a(52,"td",10),l(53),T(54,"currency"),o()(),a(55,"tr")(56,"td",9),l(57,"Th\xE0nh ti\u1EC1n"),o(),a(58,"td",10),l(59),T(60,"currency"),o()(),a(61,"tr")(62,"td",9),l(63,"T\u1ED5ng ti\u1EC1n"),o(),a(64,"td",10),l(65),T(66,"currency"),o()(),a(67,"tr")(68,"td",9),l(69," Tr\u1EA1ng th\xE1i \u0111\u01A1n h\xE0ng "),o(),a(70,"td",10),_(71,"app-status-label",11),o()()()(),a(72,"section",12),x(73,ir,2,1,"button",13)(74,nr,2,0,"button",14),o()(),a(75,"section",15)(76,"h4",7),l(77,"Chi ti\u1EBFt s\u1EA3n ph\u1EA9m thu\xEA"),o(),a(78,"nz-table",16,1)(80,"thead")(81,"tr")(82,"th",17)(83,"label",18),Q("ngModelChange",function(e){g(s);let r=h();return K(r.allChecked,e)||(r.allChecked=e),f(e)}),v("ngModelChange",function(e){g(s);let r=h();return f(r.onAllChecked(e))}),o()(),a(84,"th",19),l(85,"S\u1EA3n ph\u1EA9m"),o(),a(86,"th",20),l(87,"Th\xF4ng tin thu\xEA"),o()()(),a(88,"tbody"),x(89,rr,23,14,"tr",21),o()()()(),si()}if(i&2){let s=n.ngIf,t=h();c(5),b("# ",s.code,""),c(11),b(" ",s.user.userName," "),c(5),b(" ",s.recipientPhoneNumber," "),c(5),b(" ",s.recipientEmail," "),c(5),b(" ",le(32,20,s.startDate,"short")," "),c(6),b(" ",t.convertRentalDay(s.startDate,s.endDate)," "),c(5),R(s.code),c(5),b(" ",j(48,23,t.totalQuantity$)," "),c(6),b(" - ",ye(54,25,Te(43,kt,s.totalDepositPrice))," "),c(6),b(" ",ye(60,31,Te(45,kt,+s.totalRentPrice+ +s.totalDepositPrice))," "),c(6),b(" ",ye(66,37,Te(47,kt,+s.totalRentPrice+ +s.totalDepositPrice))," "),c(6),m("label",t.convertStatus(t.getOrderStatusLatest(s)))("statusType",t.getOrderStatusLatest(s)),c(2),re(73,t.avaiableAprroveRequestOrder.includes(t.getOrderStatusLatest(s))?73:-1),c(),re(74,t.availableCancelRequestOrder.includes(t.getOrderStatusLatest(s))?74:-1),c(4),m("nzBordered",!0)("nzData",s.orderDetails)("nzSize","middle"),c(5),q("ngModel",t.allChecked),c(6),m("ngForOf",s.orderDetails)}}function or(i,n){i&1&&(a(0,"h3",29),l(1,"X\xE9t duy\u1EC7t y\xEAu c\u1EA7u \u0111\u01A1n thu\xEA"),o())}var on=(()=>{let n=class n{onAllChecked(t){}onItemChecked(){}convertRentalDay(t,e){let r=new Date(t),p=new Date(e);return this.timerCalculatorService.convertRentalDays([r,p])}convertStatus(t){return zt(t)}convertTextButton(t){return ki(t)}selectStateFromNgRx(){this.totalQuantity$=this.store.select(en),this.orderDetail$=this.store.select(Zi)}getOrderStatusLatest(t){return t.orderStatuses.reduce((e,r)=>Math.max(e,r.status),-1/0)}dispatchActionNessarray(){this.subScription=this.activateRoute.paramMap.pipe(U(t=>{let e=t.get("id");e&&this.store.dispatch(je({pid:e}))})).subscribe()}popUpChangeStatus(t){this.rentalModalRef=this.modalService.create({nzTitle:t,nzContent:Hi,nzFooter:null,nzBodyStyle:{padding:"12px"},nzData:{orderDetail$:this.orderDetail$}}),this.rentalModalRef&&this.rentalModalRef.afterClose.subscribe(e=>{e==="updated"&&(this.rentalModalRef=null)})}popUpCancelOrderStatus(){this.rentalModalRef=this.modalService.create({nzContent:$i,nzCloseIcon:"",nzFooter:null,nzBodyStyle:{padding:"12px"}}),this.rentalModalRef.getContentComponent().noteReasonCancel.subscribe(e=>{ri([this.activateRoute.paramMap]).pipe(ai(([r])=>{let p=r.get("id"),d=new FormData;return d.append("Id",""),d.append("OrderId",`${p}`),d.append("Message",`${e}`),d.append("Status",`${Ee.CANCEL}`),d.append("FileAttach",""),this.orderService.requestOrderStatus(d)}),O(()=>{this.dispatchActionNessarray()})).subscribe({next:()=>{this.messageResponseMS.showInfo("S\u1EBD th\xF4ng b\xE1o \u0111\u01A1n h\xE0ng h\u1EE7y t\u1EDBi b\xEAn thu\xEA")},error:r=>{console.error("L\u1ED7i x\u1EED l\xFD:",r)}})})}ngOnInit(){this.dispatchActionNessarray(),this.selectStateFromNgRx(),console.log("Oninit call")}ngOnDestroy(){console.log("OnDestroy call"),this.subScription?.unsubscribe(),this.store.dispatch(Rt())}constructor(t,e,r,p,d,u){this.activateRoute=t,this.timerCalculatorService=e,this.modalService=r,this.store=p,this.orderService=d,this.messageResponseMS=u,this.allChecked=!1,this.preventContinueChangeStatus=mi,this.availableCancelRequestOrder=[Ee.PENDING_APPROVAL,Ee.PAYMENTED],this.avaiableAprroveRequestOrder=[Ee.PENDING_APPROVAL,Ee.PAYMENTED,Ee.DEPOSIT_REFUND],this.rentalModalRef=null}};n.\u0275fac=function(e){return new(e||n)(C(ue),C(wt),C(Fe),C(Y),C(Ue),C(ge))},n.\u0275cmp=A({type:n,selectors:[["app-order-detail"]],decls:4,vars:3,consts:[["modalTitle",""],["basicTable",""],[4,"ngIf"],[1,"p-5","my-3","bg-white","rounded-md"],[1,"text-xl","text-[#111]"],[1,"flex","items-start","gap-x-3"],[1,"p-5","bg-white","rounded-md","min-w-[25%]",2,"min-height","calc(100vh - 80px)"],[1,"pb-3","text-lg","font-medium"],[1,"w-full"],[1,"text-[14px]","font-normal","py-[4px]","w-full"],[1,"font-medium","py-[4px]"],[3,"label","statusType"],[1,"flex","flex-col","gap-2","pt-3"],["nz-button","","nzType","primary",1,"w-full"],["nz-button","","nzType","default",1,"w-full"],[1,"flex-1","p-5","bg-white","rounded-md"],[3,"nzBordered","nzData","nzSize"],["nzWidth","5%"],["nz-checkbox","",3,"ngModelChange","ngModel"],["nzWidth","20%"],["nzWidth","50%"],[4,"ngFor","ngForOf"],["nz-button","","nzType","primary",1,"w-full",3,"click"],["nz-button","","nzType","default",1,"w-full",3,"click"],["nz-checkbox","","ngModel","",3,"ngModelChange"],[1,"gap-3","flex","items-center"],[1,"w-[270px]","h-[190px]","object-cover","rounded-sm",3,"src","alt"],[1,"flex","justify-start","gap-x-5"],[1,"text-[14px]","font-normal","py-[4px]","w-[40%]"],[1,"font-medium"]],template:function(e,r){e&1&&(x(0,ar,90,49,"ng-container",2),T(1,"async"),x(2,or,2,0,"ng-template",null,0,F)),e&2&&m("ngIf",j(1,1,r.orderDetail$))},dependencies:[X,St,Pe,yt,ke,J,Ve,Ri,_e,fe,Ce,xe,ve,Se,At,Me,de,Ie]});let i=n;return i})();var lr=()=>({x:"1150px"});function cr(i,n){if(i&1&&l(0),i&2){let s=h().$implicit;b(" ",s.discountValue," % ")}}function pr(i,n){if(i&1&&(l(0),T(1,"currency")),i&2){let s=h().$implicit;b(" ",pi(1,1,s.discountValue,"VND","","1.0-0")," VND ")}}function dr(i,n){i&1&&(a(0,"p",15),l(1,"\u0110ang Hoa\u0323t \u0110\xF4\u0323ng"),o())}function ur(i,n){i&1&&(a(0,"p",22),l(1,"Kh\xF4ng Hoa\u0323t \u0110\xF4\u0323ng"),o())}function mr(i,n){if(i&1){let s=E();a(0,"p",23),l(1,"|"),o(),a(2,"a",20),v("click",function(){g(s);let e=h().$implicit,r=h();return f(r.deactiveVoucher(e.id))}),_(3,"span",24),o()}}function hr(i,n){if(i&1){let s=E();a(0,"tr")(1,"td",6),l(2),o(),a(3,"td",7),x(4,cr,1,1)(5,pr,2,6),o(),a(6,"td",8),l(7),T(8,"date"),o(),a(9,"td",9),l(10),T(11,"date"),o(),a(12,"td",10),l(13),o(),a(14,"td",11),x(15,dr,2,0,"p",15)(16,ur,2,0),o(),a(17,"td",12)(18,"a",16),v("click",function(){let e=g(s).$implicit,r=h();return f(r.getVoucherById(e.id))}),_(19,"span",17),a(20,"span",18),l(21,"Chi\u0309nh S\u01B0\u0309a"),o()()(),a(22,"td",13)(23,"div",19)(24,"a",20),v("click",function(){let e=g(s).$implicit,r=h();return f(r.deleteVoucher(e.id))}),_(25,"span",21),o(),x(26,mr,4,0),o()()()}if(i&2){let s=n.$implicit;c(2),R(s.code),c(2),re(4,s.discountType==0?4:5),c(3),b(" ",le(8,7,s.startDate,"dd/MM/yyyy hh:mm a")," "),c(3),b(" ",le(11,10,s.expiryDate,"dd/MM/yyyy hh:mm a")," "),c(3),R(s.description),c(2),re(15,s.isActive?15:16),c(11),re(26,s.isActive?26:-1)}}var sn=(()=>{let n=class n{constructor(t,e,r,p,d,u,y,W,Gt){this.route=t,this.router=e,this.navigateService=r,this.voucherService=p,this.loadingSerivce=d,this.cdRef=u,this.userProfileService=y,this.messageService=W,this.modal=Gt,this.voucherId="",this.listData=[],this.customColumn=[{name:"Ma\u0303 Khuy\xEA\u0301n Ma\u0303i",value:"maVoucher",default:!0,position:"left",width:200,fixWidth:!0},{name:"Gia\u0301 Tri\u0323 Gia\u0309m Gia\u0301",value:"giaTri",default:!0,position:"left",width:200,fixWidth:!0},{name:"Nga\u0300y B\u0103\u0301t \u0110\xE2\u0300u",value:"ngayBatDau",default:!0,position:"left",width:200,fixWidth:!0},{name:"Nga\u0300y K\xEA\u0301t Thu\u0301c",value:"ngayKetThuc",default:!0,position:"left",width:200,fixWidth:!0},{name:"Th\u1EDDi gian thu\xEA",value:"thoiGianThue",default:!0,position:"left",width:200,fixWidth:!0},{name:"N\u1ED9i dung",value:"noiDung",default:!0,position:"left",width:200,fixWidth:!0},{name:"Tr\u1EA1ng th\xE1i",value:"trangThai",default:!0,position:"left",width:200,fixWidth:!0},{name:"Chi\u0309nh S\u01B0\u0309a",value:"chinhSua",default:!0,position:"left",width:200,fixWidth:!0},{name:"Xo\u0301a",value:"xoa",default:!0,position:"left",width:200,fixWidth:!0}]}handleChooseViewCell(t){this.customColumn=this.customColumn.map((e,r)=>z(S({},e),{default:t[r].checked}))}onSubmitForm(t){t.shopId=this.userProfileService.rentalshopId??"",this.voucherService.createVoucher(t).subscribe({next:e=>{this.messageService.showSuccess("Ta\u0323o Voucher M\u01A1\u0301i Tha\u0300nh C\xF4ng!"),this.onloadVoucher()},error:e=>{this.messageService.handleError("Ta\u0323o Voucher M\u01A1\u0301i th\xE2\u0301t ba\u0323i!")}})}onUpdateSubmitForm(t){this.voucherService.updateVoucher(this.voucherId,t).subscribe({next:e=>{this.messageService.showSuccess("C\xE2\u0323p Nh\xE2\u0323t Voucher Tha\u0300nh C\xF4ng!"),this.onloadVoucher(),this.voucherId=""},error:e=>{this.messageService.handleError("C\xE2\u0323p Nh\xE2\u0323t Voucher th\xE2\u0301t ba\u0323i!")}})}onloadVoucher(){return be(this,null,function*(){this.loadingSerivce.setLoading();let t=this.userProfileService.rentalshopId;this.voucherService.listVoucher(t??"").subscribe(e=>{this.listData=e.data,this.loadingSerivce.setOtherLoading("loaded")})})}getVoucherById(t){this.loadingSerivce.setLoading(),this.voucherService.getVoucher(t).subscribe({next:e=>{this.voucherInformation=e.data[0],this.voucherId=t,console.log("Voucher Information:",this.voucherInformation),this.loadingSerivce.setOtherLoading("loaded")},error:e=>{this.messageService.handleError("L\u1EA5y th\xF4ng tin voucher th\u1EA5t b\u1EA1i!"),console.error("Error:",e)}})}deactiveVoucher(t){this.modal.error({nzTitle:'<b class="uppercase">D\u01B0\u0300ng Ch\u01B0\u01A1ng Tri\u0300nh Khuy\xEA\u0301n Ma\u0303i</b>',nzContent:'<p class="py-3 text-red-300">Ba\u0323n ch\u0103\u0301c ch\u0103\u0301n mu\xF4\u0301n d\u01B0\u0300ng ch\u01B0\u01A1ng tri\u0300nh khuy\xEA\u0301n ma\u0303i na\u0300y kh\xF4ng?</p>',nzOkText:"D\u01B0\u0300ng",nzOkType:"primary",nzOkDanger:!0,nzOnOk:()=>{this.voucherService.deactivateVoucher(t).subscribe({next:e=>{this.messageService.showSuccess("D\u01B0\u0300ng Ch\u01B0\u01A1ng Tri\u0300nh Khuy\xEA\u0301n Ma\u0303i Tha\u0300nh C\xF4ng!"),this.onloadVoucher(),this.voucherId=""},error:e=>{this.messageService.handleError("D\u01B0\u0300ng Ch\u01B0\u01A1ng Tri\u0300nh Khuy\xEA\u0301n Ma\u0303i th\xE2\u0301t ba\u0323i!")}})},nzCancelText:"Kh\xF4ng",nzOnCancel:()=>this.messageService.showInfo("Ba\u0323n \u0110a\u0303 Hu\u0309y! Kh\xF4ng D\u01B0\u0300ng Ch\u01B0\u01A1ng Tri\u0300nh Khuy\xEA\u0301n Ma\u0303i!")})}deleteVoucher(t){this.modal.error({nzTitle:'<b class="uppercase">Xo\u0301a Ch\u01B0\u01A1ng Tri\u0300nh Khuy\xEA\u0301n Ma\u0303i</b>',nzContent:'<p class="py-3 text-red-300">Ba\u0323n ch\u0103\u0301c ch\u0103\u0301n mu\xF4\u0301n xo\u0301a ch\u01B0\u01A1ng tri\u0300nh khuy\xEA\u0301n ma\u0303i na\u0300y kh\xF4ng?</p>',nzOkText:"Xo\u0301a",nzOkType:"primary",nzOkDanger:!0,nzOnOk:()=>{this.voucherService.deleteVoucher(t).subscribe({next:e=>{this.messageService.showSuccess("Xo\u0301a Khuy\xEA\u0301n Ma\u0303i Tha\u0300nh C\xF4ng!"),this.onloadVoucher(),this.voucherId=""},error:e=>{this.messageService.handleError("Xo\u0301a Khuy\xEA\u0301n Ma\u0303i th\xE2\u0301t ba\u0323i!")}})},nzCancelText:"Kh\xF4ng",nzOnCancel:()=>this.messageService.showInfo("Ba\u0323n \u0110a\u0303 Hu\u0309y! Kh\xF4ng Xo\u0301a Khuy\xEA\u0301n Ma\u0303i!")})}ngOnInit(){this.onloadVoucher()}};n.\u0275fac=function(e){return new(e||n)(C(ue),C(me),C(It),C(Bi),C($),C(pe),C(Tt),C(ge),C(Fe))},n.\u0275cmp=A({type:n,selectors:[["app-manage-voucher"]],decls:28,vars:7,consts:[["basicTable",""],[1,"p-5","my-3","bg-white","rounded-md"],[1,"text-xl","text-[#111]"],[1,"py-3"],[3,"saveVoucher","updateVoucher","voucher"],["nzShowSizeChanger","true",3,"nzCustomColumn","nzScroll","nzData","nzBordered"],["nzCellControl","maVoucher"],["nzCellControl","giaTri"],["nzCellControl","ngayBatDau"],["nzCellControl","ngayKetThuc"],["nzCellControl","noiDung"],["nzCellControl","trangThai"],["nzCellControl","chinhSua","nzRight",""],["nzCellControl","xoa","nzRight",""],[4,"ngFor","ngForOf"],[1,"status-success"],[1,"text-blue-600",3,"click"],["nz-icon","","nzType","form","nzTheme","outline",1,"text-lg"],[1,"mx-2"],[1,"flex","justify-around"],[1,"text-red-600",3,"click"],["nz-tooltip","","nzTooltipTitle","Xo\u0301a Khuy\xEA\u0301n Ma\u0303i","nz-icon","","nzType","delete","nzTheme","outline"],[1,"status-error"],[1,"text-gray-300"],["nz-tooltip","","nzTooltipTitle","D\u01B0\u0300ng Ch\u01B0\u01A1ng Tri\u0300nh","nz-icon","","nzType","stop","nzTheme","outline"]],template:function(e,r){if(e&1){let p=E();a(0,"div",1)(1,"h3",2),l(2,"Danh s\xE1ch Khuy\xEA\u0301n Ma\u0303i C\u01B0\u0309a Ha\u0300ng Cu\u0309a T\xF4i"),o(),a(3,"section",3)(4,"app-form-voucher",4),v("saveVoucher",function(u){return g(p),f(r.onSubmitForm(u))})("updateVoucher",function(u){return g(p),f(r.onUpdateSubmitForm(u))}),o()(),a(5,"section")(6,"nz-table",5,0)(8,"thead")(9,"tr")(10,"th",6),l(11,"Ma\u0303 Khuy\xEA\u0301n Ma\u0303i"),o(),a(12,"th",7),l(13,"Gi\xE1 tr\u1ECB Gi\u1EA3m Gi\xE1"),o(),a(14,"th",8),l(15,"Nga\u0300y B\u0103\u0301t \u0110\xE2\u0300u"),o(),a(16,"th",9),l(17,"Nga\u0300y H\xEA\u0301t Ha\u0323n"),o(),a(18,"th",10),l(19,"N\u1ED9i dung"),o(),a(20,"th",11),l(21,"Tr\u1EA1ng th\xE1i"),o(),a(22,"th",12),l(23,"Chi\u0309nh S\u01B0\u0309a"),o(),a(24,"th",13),l(25,"Xo\u0301a"),o()()(),a(26,"tbody"),x(27,hr,27,13,"tr",14),o()()()()}if(e&2){let p=I(7);c(4),m("voucher",r.voucherInformation),c(2),m("nzCustomColumn",r.customColumn)("nzScroll",Oe(6,lr))("nzData",r.listData)("nzBordered",!0),c(21),m("ngForOf",p.data)}},dependencies:[X,Oi,J,he,_e,fe,Ce,xe,ve,Se,Le,Be,Gi,de,Ie],styles:[".status-success[_ngcontent-%COMP%]{background-color:#e6f7ec;color:#00b141;padding:4px 8px;border-radius:4px;border:1px solid #00b141;display:inline-block}.status-warning[_ngcontent-%COMP%]{background-color:#fff3e9;color:#ff831e;padding:4px 8px;border-radius:4px;border:1px solid #ff831e;display:inline-block}.status-error[_ngcontent-%COMP%]{background-color:#f2dede;color:#a94442;padding:4px 8px;border-radius:4px;border:1px solid #a94442;display:inline-block}.status-pending_approval[_ngcontent-%COMP%]{background-color:#eaf1ff;color:#2f74ff;padding:4px 8px;border-radius:4px;border:1px solid #2F74FF;display:inline-block}.status-pending_payment[_ngcontent-%COMP%]{background-color:#ffeeea;color:#e87817;padding:4px 8px;border-radius:4px;border:1px solid #E87817;display:inline-block}.status-pending_delivery[_ngcontent-%COMP%]{background-color:#eafeff;color:#08a9ae;padding:4px 8px;border-radius:4px;border:1px solid #08A9AE;display:inline-block}.status-received[_ngcontent-%COMP%]{background-color:#eaf7e6;color:#addb8a;padding:4px 8px;border-radius:4px;border:1px solid #ADDB8A;display:inline-block}.status-refund[_ngcontent-%COMP%]{background-color:#f6f7e6;color:#dbd28a;padding:4px 8px;border-radius:4px;border:1px solid #DBD28A;display:inline-block}.status-deposit_refund[_ngcontent-%COMP%]{background-color:#e6f7ec;color:#8adba8;padding:4px 8px;border-radius:4px;border:1px solid #8ADBA8;display:inline-block}"]});let i=n;return i})();var ln=[{label:De.NEWEST,value:ze.NEWEST},{label:De.OLDERST,value:ze.OLDERST},{label:De.PRICELH,value:ze.PRICELH},{label:De.PRICEHL,value:ze.PRICEHL},{label:De.HIGHESTRATE,value:ze.HIGHESTRATE},{label:De.MOSTPOPULAR,value:ze.MOSTPOPULAR}];var fr=["fileInput"],Cr=["bannerInput"];function vr(i,n){if(i&1&&_(0,"nz-avatar",50),i&2){let s=h(2);m("nzSrc",s.shop.avatarShop?s.shop.avatarShop:"/assets/images/logo-shop-default.png")}}function _r(i,n){if(i&1){let s=E();a(0,"nz-avatar",51),v("click",function(){g(s);let e=h(2);return f(e.triggerFileInput())})("error",function(e){g(s);let r=h(2);return f(r.onImageError(e))}),o()}if(i&2){let s=h(2);m("nzSrc",s.avatarUrl?s.avatarUrl:"/assets/images/logo-shop-default.png")}}function Sr(i,n){if(i&1&&(a(0,"h2",52),l(1),o()),i&2){let s=h(2);c(),b(" ",s.shop.shopName," ")}}function xr(i,n){if(i&1){let s=E();a(0,"input",53),Q("ngModelChange",function(e){g(s);let r=h(2);return K(r.shopData.shopName,e)||(r.shopData.shopName=e),f(e)}),o()}if(i&2){let s=h(2);q("ngModel",s.shopData.shopName)}}function br(i,n){if(i&1){let s=E();a(0,"div",54)(1,"button",55),v("click",function(){g(s);let e=h(2);return f(e.saveChanges())}),l(2," L\u01B0u "),o(),a(3,"button",56),v("click",function(){g(s);let e=h(2);return f(e.cancelChanges())}),l(4," H\u1EE7y "),o()()}}function Tr(i,n){if(i&1){let s=E();a(0,"a",57),v("click",function(){g(s);let e=h(2);return f(e.editShopInfo())}),_(1,"span",58),l(2," Ch\u1EC9nh s\u1EEDa "),o()}}function yr(i,n){i&1&&(a(0,"p",59)(1,"span",60),l(2,"*"),o(),l(3," Nh\xE2\u0301p va\u0300o a\u0309nh banner va\u0300 avatar \u0111\xEA\u0309 chi\u0309nh s\u01B0\u0309a a\u0309nh "),o())}function Er(i,n){if(i&1&&_(0,"img",61),i&2){let s=h(2);m("src",s.shop.banner?s.shop.banner:"/assets/images/shop-banner.jpg",Qe)}}function Dr(i,n){if(i&1){let s=E();a(0,"img",62),v("click",function(){g(s);let e=h(2);return f(e.triggerBannerInput())})("error",function(e){g(s);let r=h(2);return f(r.onImageError(e))}),o()}if(i&2){let s=h(2);m("src",s.bannerUrl?s.bannerUrl:"/assets/images/shop-banner.jpg",Qe)}}function zr(i,n){if(i&1){let s=E();a(0,"button",63),v("click",function(){g(s);let e=h(2);return f(e.onSearch())}),_(1,"span",64),o()}}function Ar(i,n){if(i&1&&_(0,"nz-option",43),i&2){let s=n.$implicit,t=n.$index;m("nzLabel",s.label)("nzKey",t)("nzValue",s.value)}}function wr(i,n){if(i&1){let s=E();a(0,"nz-col",67)(1,"app-product-card",68),v("editProduct",function(){let e=g(s).$implicit,r=h(3);return f(r.showProductModal(e.id))}),o()()}if(i&2){let s=n.$implicit;m("nzXs",24)("nzSm",12)("nzMd",8)("nzLg",6),c(),m("product",s)}}function Rr(i,n){if(i&1&&(a(0,"div")(1,"nz-row",65),x(2,wr,2,5,"nz-col",66),o()()),i&2){let s=h(2);c(),m("nzGutter",16),c(),m("ngForOf",s.productList)}}function Or(i,n){i&1&&(a(0,"div",69),_(1,"nz-result",70),o())}function Mr(i,n){if(i&1){let s=E();a(0,"div")(1,"div",5)(2,"div",6)(3,"div",7),_(4,"img",8),a(5,"div",9)(6,"div",10),x(7,vr,1,1,"nz-avatar",11)(8,_r,1,1,"nz-avatar",12),a(9,"input",13,0),v("change",function(e){g(s);let r=h();return f(r.handleAvatarChange(e))}),o(),a(11,"div",14),x(12,Sr,2,1,"h2",15)(13,xr,1,1,"input",16)(14,br,5,0,"div",17)(15,Tr,3,0,"a",18),o()()()(),a(16,"div",19)(17,"div",20)(18,"div")(19,"p",21),_(20,"span",22),a(21,"span",23),l(22,"Thi\u1EBFt B\u1ECB:"),o(),a(23,"span",24),l(24),o()()(),a(25,"div")(26,"p",25),_(27,"span",26),a(28,"span",23),l(29,"\u0110\xE1nh Gi\xE1:"),o(),a(30,"span",24),l(31),T(32,"number"),o()()()(),a(33,"div",27)(34,"div")(35,"p",28),_(36,"span",29),a(37,"span",23),l(38,"Ng\u01B0\u1EDDi \u0110ang Thu\xEA:"),o(),a(39,"span",24),l(40),o()()(),a(41,"div")(42,"p",28),_(43,"span",30),a(44,"span",23),l(45,"Tham Gia:"),o(),a(46,"span",24),l(47),o()()()()()()(),a(48,"div",31),x(49,yr,4,0,"p",32)(50,Er,1,1,"img",33)(51,Dr,1,1,"img",34),a(52,"input",13,1),v("change",function(e){g(s);let r=h();return f(r.handleBannerChange(e))}),o()(),a(54,"nz-row",35)(55,"nz-col",36)(56,"div",37)(57,"div",38)(58,"nz-input-group",39)(59,"input",40),Q("ngModelChange",function(e){g(s);let r=h();return K(r.searchText,e)||(r.searchText=e),f(e)}),v("keydown.enter",function(){g(s);let e=h();return f(e.onSearch())}),o()(),x(60,zr,2,0,"ng-template",null,2,F),o(),a(62,"div",41)(63,"nz-select",42),Q("ngModelChange",function(e){g(s);let r=h();return K(r.selectedValue,e)||(r.selectedValue=e),f(e)}),Ct(64,Ar,1,3,"nz-option",43,ft),o()()()(),a(66,"nz-col",44)(67,"button",45),v("click",function(){g(s);let e=h();return f(e.showProductModal())}),l(68," Ta\u0323o Thi\xEA\u0301t Bi\u0323 Cho Thu\xEA M\u01A1\u0301i "),o()()(),x(69,Rr,3,2,"div",46),a(70,"nz-row",47)(71,"nz-pagination",48),Q("nzPageIndexChange",function(e){g(s);let r=h();return K(r.currentPage,e)||(r.currentPage=e),f(e)}),v("nzPageIndexChange",function(e){g(s);let r=h();return f(r.handlePageChange(e))}),o()(),a(72,"app-form-product",49),v("closeModal",function(){g(s);let e=h();return f(e.handleCloseModal())})("saveProduct",function(e){g(s);let r=h();return f(r.handleCreateProduct(e))})("updateProduct",function(e){g(s);let r=h();return f(r.handleUpdateProduct(e))}),o(),x(73,Or,2,0,"ng-template",null,3,F),o()}if(i&2){let s=I(61),t=I(74),e=h();c(7),m("ngIf",!e.isUpdateShop),c(),m("ngIf",e.isUpdateShop),c(4),m("ngIf",!e.isUpdateShop),c(),m("ngIf",e.isUpdateShop),c(),m("ngIf",e.isUpdateShop),c(),m("ngIf",!e.isUpdateShop),c(9),R(e.total),c(7),_t("",ci(32,31,e.shop.avegateVote,"1.1-1","en-US")," (",e.shop.numberOfVote," \u0111\xE1nh gi\xE1)"),c(9),R(e.shop.numberOfRenter),c(7),R(e.calculateTime(e.shop.createDate)),c(2),m("ngIf",e.isUpdateShop),c(),m("ngIf",!e.isUpdateShop),c(),m("ngIf",e.isUpdateShop),c(3),m("nzGutter",16),c(4),m("nzAddOnAfter",s),c(),q("ngModel",e.searchText),c(4),q("ngModel",e.selectedValue),c(),vt(e.groupOptionFilterSelect),c(5),m("ngIf",!e.productListNull)("ngIfElse",t),c(2),m("nzPageSize",e.pageSize)("nzTotal",e.totalProducts),q("nzPageIndex",e.currentPage),c(),m("isEditMode",e.isEditMode)("title",e.title)("isVisible",e.isVisible)("productUpdate",e.productInformation)("alertMessage",e.alertMessage)("showAlert",e.showAlert)("rentalShopId",e.shopid)("alertType",e.alertType)}}var cn=(()=>{let n=class n{constructor(t,e,r,p,d,u,y,W,Gt,Hn,Yn,$n){this.modal=t,this.productService=e,this.storageService=r,this.cdRef=p,this.store=d,this.imageFileService=u,this.rentalShopService=y,this.userProfileService=W,this.loadingService=Gt,this.router=Hn,this.route=Yn,this.messageService=$n,this.isVisible=!1,this.productList=[],this.title="",this.totalProducts=0,this.total=0,this.currentPage=1,this.pageSize=12,this.isEditMode=!1,this.showAlert=!1,this.alertMessage="",this.currentId="",this.userid="",this.shopid="",this.searchText="",this.productListNull=!0,this.selectedValue=null,this.groupOptionFilterSelect=ln,this.alertType="success",this.isUpdateShop=!1,this.avatarUrl=null,this.bannerUrl=null,this.loading$=this.loadingService.status$}showProductModal(t){return be(this,null,function*(){if(this.isVisible=!0,this.isEditMode=!!t,console.log(this.isEditMode),this.title=t?"C\u1EADp nh\u1EADt S\u1EA3n ph\u1EA9m":"T\u1EA1o m\u1EDBi S\u1EA3n ph\u1EA9m",t){let e=this.productList.find(r=>r.id===t);if(e)try{let r=yield this.imageFileService.fetchImagesAsFiles(e.images);this.productInformation={productName:e.productName,description:e.description,quantity:e.quantity,rentalPrice:e.rentalPrice,depositPrice:e.depositPrice,rentalLimitDays:e.rentalLimitDays,evaluate:e.evaluate,images:r},this.currentId=t,this.cdRef.detectChanges()}catch(r){console.error("Error fetching images:",r)}}})}handleCloseModal(){this.isVisible=!1}ngOnInit(){this.isUpdateShop=!1,this.loadingService.setLoading(),this.route.params.subscribe(t=>{this.shopid=t.id,this.shopid&&this.loadShop()}),this.route.queryParams.subscribe(t=>{this.searchText=t.search||"",this.currentPage=+t.page||1,this.loadProducts(this.shopid,this.currentPage,this.pageSize,this.searchText)}),this.title="Th\xF4ng tin Thi\xEA\u0301t Bi\u0323"}loadShop(){this.rentalShopService.getRentalShop(this.shopid).subscribe(t=>{this.shop=t.data,this.loadProducts(this.shopid,this.currentPage,this.pageSize),console.log("shop: ",t.data)})}loadProducts(t,e,r,p){this.loadingService.setLoading(),this.productService.listProductByShop(t,e,r,p).subscribe(d=>{this.productList=d.data.items,this.productListNull=!this.productList||this.productList.length===0,this.totalProducts=d.data.totalCount,p||(this.total=d.data.totalCount),this.loadingService.setOtherLoading("loaded"),console.log(d)})}handlePageChange(t){this.currentPage=t,this.router.navigate([],{queryParams:{page:this.currentPage},queryParamsHandling:"merge"}),this.loadProducts(this.shopid,this.currentPage,this.pageSize)}handleCreateProduct(t){this.productService.createProduct(t).subscribe({next:e=>{this.messageService.showSuccess("Ta\u0323o Sa\u0309n Ph\xE2\u0309m M\u01A1\u0301i Tha\u0300nh C\xF4ng!"),this.handleCloseModal(),console.log("Product created successfully!"),this.loadProducts(this.shopid,this.currentPage,this.pageSize)},error:e=>{this.messageService.handleError("L\u01B0u s\u1EA3n ph\u1EA9m th\xE2\u0301t ba\u0323i!"),console.error("Failed to create Product")}})}handleUpdateProduct(t){this.productService.updateProduct(this.currentId,t).subscribe({next:e=>{this.messageService.showSuccess("C\xE2\u0323p nh\xE2\u0323t sa\u0309n ph\xE2\u0309m tha\u0300nh c\xF4ng!"),this.handleCloseModal(),this.loadProducts(this.shopid,this.currentPage,this.pageSize)},error:()=>{this.messageService.handleError("C\xE2\u0323p nh\xE2\u0323t s\u1EA3n ph\u1EA9m th\xE2\u0301t ba\u0323i!")}})}onSearch(){this.router.navigate([],{queryParams:{search:this.searchText},queryParamsHandling:"merge"}),this.loadProducts(this.shopid,this.currentPage,this.pageSize,this.searchText)}calculateTime(t){if(!t)return"Kh\xF4ng c\xF3 ng\xE0y t\u1EA1o";let e=new Date(t),r=new Date;if(isNaN(e.getTime()))return"Ng\xE0y kh\xF4ng h\u1EE3p l\u1EC7";let p=r.getTime()-e.getTime(),d=Math.floor(p/(1e3*60*60*24)),u=30,y=12;return d>u*y?`${Math.floor(d/(u*y))} N\u0103m Tr\u01B0\u01A1\u0301c`:d>u?`${Math.floor(d/u)} Th\xE1ng Tr\u01B0\u01A1\u0301c`:`${d} Ng\xE0y Tr\u01B0\u01A1\u0301c`}triggerFileInput(){this.fileInput.nativeElement.click()}triggerBannerInput(){this.bannerInput.nativeElement.click()}handleAvatarChange(t){let e=t.target;if(e.files&&e.files.length>0){let r=e.files[0];this.shopData.avatarShop=r,this.avatarUrl=URL.createObjectURL(r)}}handleBannerChange(t){let e=t.target;if(e.files&&e.files.length>0){let r=e.files[0];this.shopData.banner=r,this.bannerUrl=URL.createObjectURL(r)}}editShopInfo(){return be(this,null,function*(){this.isUpdateShop=!0;let t=null;if(typeof this.shop.avatarShop=="string"&&this.shop.avatarShop){let p=yield(yield fetch(this.shop.avatarShop)).blob();t=new File([p],"avatar.png",{type:p.type})}let e=null;if(typeof this.shop.banner=="string"&&this.shop.banner){let p=yield(yield fetch(this.shop.banner)).blob();e=new File([p],"banner.png",{type:p.type})}this.shopData={shopName:this.shop.shopName,avatarShop:t||null,banner:e||null},console.log(this.shopData),this.avatarUrl=t?URL.createObjectURL(t):null,this.bannerUrl=e?URL.createObjectURL(e):null,this.cdRef.detectChanges()})}saveChanges(){if((this.shopData.avatarShop instanceof File||this.shopData.avatarShop===null)&&(this.shopData.banner instanceof File||this.shopData.banner===null)){let t=new FormData;t.append("shopName",this.shopData.shopName),this.shopData.avatarShop instanceof File&&t.append("avatarShop",this.shopData.avatarShop),this.shopData.banner instanceof File&&t.append("banner",this.shopData.banner),this.rentalShopService.updateRentalShop(t,this.shopid).subscribe({next:()=>{this.loadShop(),this.messageService.showSuccess("C\u1EADp nh\u1EADt th\xE0nh c\xF4ng!")},error:()=>{this.messageService.handleError("C\u1EADp nh\u1EADt th\u1EA5t b\u1EA1i!")}})}else this.messageService.handleError("\u1EA2nh \u0111\u1EA1i di\u1EC7n ho\u1EB7c banner kh\xF4ng h\u1EE3p l\u1EC7!");this.isUpdateShop=!1}cancelChanges(){this.isUpdateShop=!1,this.shopData={avatarShop:null,shopName:this.shop.shopName,banner:null},this.avatarUrl=this.shop.avatarShop,this.bannerUrl=this.shop.banner}onImageError(t){let e=t.target;e.src="assets/images/6306486.jpg"}};n.\u0275fac=function(e){return new(e||n)(C(Fe),C(Qi),C(Z),C(pe),C(Y),C(Fi),C(Ki),C(Tt),C($),C(me),C(ue),C(ge))},n.\u0275cmp=A({type:n,selectors:[["app-manager-shop"]],viewQuery:function(e,r){if(e&1&&(ae(fr,5),ae(Cr,5)),e&2){let p;oe(p=se())&&(r.fileInput=p.first),oe(p=se())&&(r.bannerInput=p.first)}},decls:1,vars:1,consts:[["fileInput",""],["bannerInput",""],["suffixIconButton",""],["noData",""],[4,"ngIf"],[1,"border","relative","rounded-lg","p-4","bg-white","shadow-md","mt-3"],[1,"flex","flex-col","md:flex-row","h-auto","md:h-32"],[1,"w-full","md:w-1/3","relative"],["src","https://static.vecteezy.com/system/resources/thumbnails/007/068/286/small/background-for-website-or-mobile-app-online-shopping-with-3d-smartphone-on-blue-background-free-vector.jpg","alt","Group Image",1,"rounded-lg","w-full","h-32","object-cover"],[1,"absolute","inset-0","flex","items-center","justify-center"],[1,"text-white","bg-black","bg-opacity-50","w-full","h-full","flex","items-center","justify-center","rounded-lg","p-4"],["nzShape","circle","class","w-16 h-16 object-cover mr-4",3,"nzSrc",4,"ngIf"],["nzShape","circle","class","w-20 h-20 object-cover mr-4",3,"nzSrc","click","error",4,"ngIf"],["type","file","accept","image/*",1,"hidden",3,"change"],[1,"flex","flex-col","items-start"],["class","text-md font-semibold text-white md:text-lg lg:text-xl cursor-pointer",4,"ngIf"],["type","text","class","rounded px-2 py-1 font-semibold text-white md:text-lg lg:text-xl bg-slate-300/10","placeholder","Nh\u1EADp t\xEAn shop m\u1EDBi",3,"ngModel","ngModelChange",4,"ngIf"],["class","flex ml-4 mt-2",4,"ngIf"],["nz-button","","nzType","link","class","text-gray-300",3,"click",4,"ngIf"],[1,"w-full","md:w-2/3","pl-0","md:pl-4","mt-4","md:mt-0"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-1"],[1,"flex","items-center","m-5","mb-0","text-xs","md:text-sm","lg:text-base"],["nz-icon","","nzType","shop","nzTheme","outline",1,"text-lg"],[1,"text-xs","md:text-sm","lg:text-base","mx-2","truncate"],[1,"text-blue-500","ml-1","text-xs","md:text-sm","lg:text-base","truncate"],[1,"flex","items-center","mx-5","mt-5","text-xs","md:text-sm","lg:text-base"],["nz-icon","","nzType","star","nzTheme","outline",1,"text-lg"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-2","mt-4"],[1,"flex","items-center","mx-5","text-xs","md:text-sm","lg:text-base"],["nz-icon","","nzType","usergroup-add","nzTheme","outline",1,"text-lg"],["nz-icon","","nzType","team","nzTheme","outline",1,"text-lg"],[1,"bg","mt-4"],["class","text-[#2F74FF] text-sm my-1",4,"ngIf"],["class","w-full h-80 rounded object-cover object-bottom","alt","",3,"src",4,"ngIf"],["class","w-full h-80 rounded object-cover object-bottom","alt","Shop Banner",3,"src","click","error",4,"ngIf"],["nzJustify","space-between",1,"mt-4",3,"nzGutter"],["nzSpan","16"],[1,"flex","justify-between"],[1,"min-w-[75%]"],["nzSearch","",1,"w-full",3,"nzAddOnAfter"],["type","text","nz-input","","placeholder","Ti\u0300m ki\xEA\u0301m theo t\xEAn sa\u0309n ph\xE2\u0309m",3,"ngModelChange","keydown.enter","ngModel"],[1,"min-w-[20%]"],["nzShowSearch","","nzAllowClear","","nzPlaceHolder","s\u1EAFp x\u1EBFp theo th\u1EE9 t\u1EF1",1,"w-full",3,"ngModelChange","ngModel"],[3,"nzLabel","nzKey","nzValue"],["nzSpan","8",1,"text-right"],["nz-button","","nzType","primary","nzGhost","",3,"click"],[4,"ngIf","ngIfElse"],["nzJustify","center",1,"mt-4"],[1,"mt-6",3,"nzPageIndexChange","nzPageSize","nzTotal","nzPageIndex"],[3,"closeModal","saveProduct","updateProduct","isEditMode","title","isVisible","productUpdate","alertMessage","showAlert","rentalShopId","alertType"],["nzShape","circle",1,"w-16","h-16","object-cover","mr-4",3,"nzSrc"],["nzShape","circle",1,"w-20","h-20","object-cover","mr-4",3,"click","error","nzSrc"],[1,"text-md","font-semibold","text-white","md:text-lg","lg:text-xl","cursor-pointer"],["type","text","placeholder","Nh\u1EADp t\xEAn shop m\u1EDBi",1,"rounded","px-2","py-1","font-semibold","text-white","md:text-lg","lg:text-xl","bg-slate-300/10",3,"ngModelChange","ngModel"],[1,"flex","ml-4","mt-2"],["nz-button","","nzType","primary","nzGhost","",1,"mr-2",3,"click"],["nz-button","","nzType","default","nzDanger","","nzGhost","",3,"click"],["nz-button","","nzType","link",1,"text-gray-300",3,"click"],["nz-icon","","nzType","edit","nzTheme","outline",1,"text-lg"],[1,"text-[#2F74FF]","text-sm","my-1"],[1,"text-red-600"],["alt","",1,"w-full","h-80","rounded","object-cover","object-bottom",3,"src"],["alt","Shop Banner",1,"w-full","h-80","rounded","object-cover","object-bottom",3,"click","error","src"],["nz-button","","nzType","primary","nzSearch","",3,"click"],["nz-icon","","nzType","search"],[1,"mt-4",3,"nzGutter"],[3,"nzXs","nzSm","nzMd","nzLg",4,"ngFor","ngForOf"],[3,"nzXs","nzSm","nzMd","nzLg"],[3,"editProduct","product"],[1,"flex","justify-center"],["nzTitle","Ch\u01B0a Co\u0301 Thi\xEA\u0301t Bi\u0323 Cho Thu\xEA","nzSubTitle","Shop Cu\u0309a Ba\u0323n Ch\u01B0a Co\u0301 Thi\xEA\u0301t Bi\u0323 Cho Thu\xEA Na\u0300o. Ha\u0303y Ta\u0323o Thi\xEA\u0301t Bi\u0323 Cho Thu\xEA Nhe\u0301!"]],template:function(e,r){e&1&&x(0,Mr,75,35,"div",4),e&2&&m("ngIf",r.shop)},dependencies:[X,St,bi,Pe,yt,Mi,ke,J,Ve,xi,Si,Ei,Di,Ai,he,_i,Et,Dt,Ni,Li,di],styles:[".ant-message-success{background-color:#cff1cf80;color:#1fc21f;border:1px solid rgb(31,194,31);border-radius:4px!important;padding:36px!important;margin:0!important;display:flex;align-items:center;justify-content:center}  .ant-message-error{background-color:#cf6f6f80!important;color:#e71212!important;border:1px solid #e71212;border-radius:4px!important;padding:36px!important;margin:0!important;display:flex;align-items:center;justify-content:center}  .ant-message-notice-content{margin:0!important;padding:0!important}"]});let i=n;return i})();var at=Ke(Xe());var Ir="[Dashboard overview] get all card overview",Vr="[Dashboard overview] get all card overview success",kr="[Dashboard overview] get all card overview failure",Nr="[Dashboard overview] get all card overview reset state",Ye=w(Ir,V()),nt=w(Vr,V()),rt=w(kr,V()),Ft=w(Nr);var dn={data:null,message:"",status:"idle"},Pr=te(dn,D(Ye,(i,n)=>z(S({},i),{status:"loading"})),D(nt,(i,n)=>z(S({},i),{data:n.dataRes,message:n.message,status:"loaded"})),D(rt,(i,n)=>z(S({},i),{status:"error"})),D(Ft,(i,n)=>S({},dn))),ei=ee({name:ie.cardOverviewFeature,reducer:Pr}),{selectData:un,selectFeature_CardOverViewState:lo,selectStatus:co,selectMessage:po}=ei;var Fr=i=>[i,"VND","VND","1.0-0","vi"];function Lr(i,n){i&1&&_(0,"span",8)}function Br(i,n){i&1&&_(0,"span",9)}function Ur(i,n){i&1&&_(0,"span",10)}function jr(i,n){if(i&1){let s=E();a(0,"div",11)(1,"p"),l(2,"Doanh thu "),o(),a(3,"div",12)(4,"a",13),_(5,"span",14),o(),a(6,"nz-dropdown-menu",null,2)(8,"ul",15)(9,"li",16),v("click",function(){g(s);let e=h();return f(e.getRangeDate("day"))}),l(10," 30 Ng\xE0y g\u1EA7n nh\u1EA5t "),o(),a(11,"li",16),v("click",function(){g(s);let e=h();return f(e.getRangeDate("week"))}),l(12," 10 Tu\u1EA7n g\u1EA7n nh\u1EA5t "),o(),a(13,"li",16),v("click",function(){g(s);let e=h();return f(e.getRangeDate("month"))}),l(14," 12 Th\xE1ng g\u1EA7n nh\u1EA5t "),o()()()()()}if(i&2){let s=I(7);c(4),m("nzDropdownMenu",s)}}var hn=(()=>{let n=class n{loadAllCard(t){if(this.userCurrent){let e=S({RentaiShopId:this.userCurrent.RentalShopId},t);this.store.dispatch(Ye({bodyReq:e}))}}getRangeDate(t){let e,r;r=(0,at.default)().format("YYYY-MM-DD"),t==="month"?e=(0,at.default)().subtract(12,"month").startOf("month").format("YYYY-MM-DD"):t==="week"?e=(0,at.default)().subtract(10,"week").startOf("week").format("YYYY-MM-DD"):e=(0,at.default)().subtract(30,"day").startOf("day").format("YYYY-MM-DD"),this.loadAllCard({EndDate:r,StartDate:e}),this.reWriteUrl(t)}reWriteUrl(t){let e=mn[t];this.router.navigate([],{queryParams:{"card-overview-follow":e},queryParamsHandling:"merge"})}constructor(t,e,r){this.store=t,this.storageService=e,this.router=r,this.convertSlug=mn,this.userCurrent=this.storageService.get(H.currentUser)?JSON.parse(this.storageService.get(H.currentUser)):void 0}ngOnDestroy(){this.store.dispatch(Ft())}ngOnInit(){this.getRangeDate("day"),this.data$=this.store.select(un)}};n.\u0275fac=function(e){return new(e||n)(C(Y),C(Z),C(me))},n.\u0275cmp=A({type:n,selectors:[["app-card-overview"]],decls:19,vars:21,consts:[["prefixTpl",""],["title_revenueTpl",""],["menu","nzDropdownMenu"],[1,"grid","grid-cols-3","gap-x-2"],[1,"shadow","rounded-lg","border-l-0","border-r-0","border-b-0","border-t-4","border-solid","border-[#0F6CF8]"],["nzTitle","T\u1ED5ng s\u1ED1 s\u1EA3n ph\u1EA9m",3,"nzValue","nzPrefix"],["nzTitle","\u0110\u01A1n h\xE0ng \u0111ang x\u1EED l\xFD",3,"nzValue","nzPrefix"],[3,"nzValue","nzTitle","nzPrefix"],["nz-icon","","nzType","product"],["nz-icon","","nzType","swap"],["nz-icon","","nzType","transaction"],[1,"flex","justify-between","items-center"],[1,""],["nz-dropdown","","nzTrigger","click",3,"nzDropdownMenu"],["nz-icon","","nzType","dash","nzTheme","outline",1,"text-[22px]","text-black"],["nz-menu",""],["nz-menu-item","",3,"click"]],template:function(e,r){if(e&1&&(a(0,"div",3)(1,"nz-card",4),_(2,"nz-statistic",5),T(3,"async"),x(4,Lr,1,0,"ng-template",null,0,F),o(),a(6,"nz-card",4),_(7,"nz-statistic",6),T(8,"async"),x(9,Br,1,0,"ng-template",null,0,F),o(),a(11,"nz-card",4),_(12,"nz-statistic",7),T(13,"async"),T(14,"currency"),x(15,Ur,1,0,"ng-template",null,0,F)(17,jr,15,1,"ng-template",null,1,F),o()()),e&2){let p,d,u,y=I(5),W=I(18);c(2),m("nzValue",((p=j(3,7,r.data$))==null?null:p.totalProducts)||0)("nzPrefix",y),c(5),m("nzValue",((d=j(8,9,r.data$))==null?null:d.totalOrders)||0)("nzPrefix",y),c(5),m("nzValue",ye(14,13,Te(19,Fr,((u=j(13,11,r.data$))==null?null:u.totalRevenue)||0)))("nzTitle",W)("nzPrefix",y)}},dependencies:[ji,J,he,gi,hi,wi,fi,Ci,vi,Me,de],changeDetection:0});let i=n;return i})(),mn={day:"last-30-days",week:"last-10-weeks",month:"last-12-months"};var Yr="[Dashboard overview] get data chart top sub-category",$r="[Dashboard overview] get data chart top sub-category success",Gr="[Dashboard overview] get data chart top sub-category failure",Wr="[Dashboard overview] get data chart top sub-category reset state",Ae=w(Yr,V()),Lt=w($r,V()),ot=w(Gr,V()),Bt=w(Wr);var st=Ke(Xe());var fn={data:null,message:"",status:"idle"},qr=te(fn,D(Ae,(i,n)=>z(S({},i),{status:"loading"})),D(Lt,(i,n)=>z(S({},i),{data:n.dataRes,message:n.message,status:"loaded"})),D(ot,(i,n)=>z(S({},i),{status:"error"})),D(Bt,(i,n)=>S({},fn))),ti=ee({name:ie.dataChartSubCategory,reducer:qr}),{selectData:Cn,selectStatus:Oo,selectMessage:Mo}=ti,vn=N(Cn,i=>!i||!Array.isArray(i)?[]:i.map(n=>n.subCategoryName)),_n=N(Cn,i=>!i||!Array.isArray(i)?[]:i.map(n=>n.totalQuantity));var Ut=(()=>{let n=class n{chartClicked({event:t,active:e}){}chartHovered({event:t,active:e}){}getRangeDate(t){let e,r;r=(0,st.default)().endOf("month").format("YYYY-MM-DD"),t==="month"?e=(0,st.default)().subtract(12,"month").startOf("month").format("YYYY-MM-DD"):t==="week"?e=(0,st.default)().subtract(10,"week").startOf("week").format("YYYY-MM-DD"):e=(0,st.default)().subtract(12,"month").startOf("month").format("YYYY-MM-DD"),this.loadData({StartDate:e,EndDate:r,typeChoose:t})}loadData(t){if(this.userCurrent){let e=S({RentaiShopId:this.userCurrent.RentalShopId},t);this.store.dispatch(Ae({bodyReq:e}))}}refreshChart(){this.chart&&this.chart.update()}constructor(t,e){this.store=t,this.storageService=e,this.chooseFollowDate=xt,this.subscriptions=new we,this.barChartOptions={responsive:!0,indexAxis:"y",scales:{x:{title:{display:!0,text:"S\u1ED1 l\u01B0\u1EE3ng \u0111\u01B0\u1EE3c thu\xEA c\u1EE7a t\u1EEBng lo\u1EA1i s\u1EA3n ph\u1EA9m"},position:"bottom"},y:{title:{display:!0,text:"T\xEAn lo\u1EA1i s\u1EA3n ph\u1EA9m"},grid:{display:!1}}},plugins:{legend:{display:!0,position:"bottom"},tooltip:{backgroundColor:"white",titleColor:"black",bodyColor:"black",callbacks:{title:function(r){return`T\xEAn lo\u1EA1i s\u1EA3n ph\u1EA9m: ${r[0].label}`},labelTextColor:function(){return"#000"}}}}},this.barChartType="bar",this.barChartData={labels:[],datasets:[{data:[],label:"S\u1ED1 l\u1EA7n \u0111\u01B0\u1EE3c thu\xEA",backgroundColor:"rgba(15, 108, 248, 0.7)",borderColor:"#aad0f0",borderWidth:1}]},this.userCurrent=this.storageService.get(H.currentUser)?JSON.parse(this.storageService.get(H.currentUser)):void 0}ngOnInit(){this.getRangeDate("month"),this.labelData$=this.store.select(vn),this.quantityData$=this.store.select(_n),this.subscriptions.add(this.labelData$.subscribe(t=>{this.barChartData.labels=t,this.refreshChart()})),this.subscriptions.add(this.quantityData$.subscribe(t=>{this.barChartData.datasets[0].data=t,this.refreshChart()}))}ngOnDestroy(){this.subscriptions.unsubscribe(),this.store.dispatch(Bt())}};n.\u0275fac=function(e){return new(e||n)(C(Y),C(Z))},n.\u0275cmp=A({type:n,selectors:[["app-sub-category-statistic"]],viewQuery:function(e,r){if(e&1&&ae(G,5),e&2){let p;oe(p=se())&&(r.chart=p.first)}},decls:9,vars:6,consts:[[1,"bg-white","my-3","p-6","rounded-md"],[1,"flex","items-center","justify-between","mb-3"],[1,"font-semibold","text-[22px]"],[3,"chooseItemOption","defaultValue","optionSelect"],[1,"overflow-x-scroll","md:overflow-x-hidden"],[1,"min-w-[600px]"],["baseChart","",3,"chartHover","chartClick","data","options","type"]],template:function(e,r){e&1&&(a(0,"div",0)(1,"div",1)(2,"h3",2),l(3," Top lo\u1EA1i s\u1EA3n ph\u1EA9m \u0111\u01B0\u1EE3c thu\xEA nhi\u1EC1u nh\u1EA5t "),o(),a(4,"div")(5,"app-select-view-statistic",3),v("chooseItemOption",function(d){return r.getRangeDate(d)}),o()()(),a(6,"div",4)(7,"div",5)(8,"canvas",6),v("chartHover",function(d){return r.chartHovered(d)})("chartClick",function(d){return r.chartClicked(d)}),o()()()()),e&2&&(c(5),m("defaultValue","0")("optionSelect",r.chooseFollowDate),c(3),m("data",r.barChartData)("options",r.barChartOptions)("type",r.barChartType)("type","bar"))},dependencies:[Ot,G]});let i=n;return i})();var lt=Ke(Xe());var Xr="[Dashboard overview] get data chart revenue",Jr="[Dashboard overview] get data chart revenue success",Zr="[Dashboard overview] get data chart revenue failure",ea="[Dashboard overview] get data chart revenue reset state",$e=w(Xr,V()),Ge=w(Jr,V()),We=w(Zr,V()),jt=w(ea);var bn={data:null,message:"",typeOption:"m",status:"idle"},ta=te(bn,D($e,(i,n)=>z(S({},i),{typeOption:n.typeOption,status:"loading"})),D(Ge,(i,n)=>z(S({},i),{data:[...n.dataRes],message:n.message,status:"loaded"})),D(We,(i,n)=>z(S({},i),{status:"error"})),D(jt,(i,n)=>S({},bn))),ii=ee({name:ie.dataChartRevenue,reducer:ta,extraSelectors:({selectData:i,selectTypeOption:n})=>({selectArrLabelData:N(i,n,(s,t)=>!s||!Array.isArray(s)?[]:s.map(e=>t==="m"?`Th\xE1ng ${e.month}/${e.year}`:`Tu\u1EA7n ${e.week}/${e.year}`)),selectArrTransactionData:N(i,s=>!s||!Array.isArray(s)?[]:s.map(t=>t.transactionCount)),selectArrRevenueData:N(i,s=>!s||!Array.isArray(s)?[]:s.map(t=>t.totalRevenue))})}),{selectData:Yo,selectStatus:$o,selectMessage:Go,selectTypeOption:Tn,selectArrLabelData:yn,selectArrRevenueData:En,selectArrTransactionData:Dn}=ii;var Ht=(()=>{let n=class n{getRangeDate(t){let e,r;r=(0,lt.default)().endOf("month").format("YYYY-MM-DD"),t==="month"?e=(0,lt.default)().endOf("month").subtract(12,"month").startOf("month").format("YYYY-MM-DD"):t==="week"?e=(0,lt.default)().subtract(10,"week").startOf("week").format("YYYY-MM-DD"):e=(0,lt.default)().subtract(12,"month").startOf("month").format("YYYY-MM-DD"),this.loadData({StartDate:e,EndDate:r},t==="week"?"w":"m")}loadData(t,e="m"){if(this.userCurrent){let r=S({RentaiShopId:this.userCurrent.RentalShopId},t);this.store.dispatch($e({bodyReq:r,typeOption:e}))}}refreshChart(){this.chart&&this.chart.update()}constructor(t,e,r){this.store=t,this.storageService=e,this.cdRef=r,this.chooseFollowDate=xt,this.barChartOptions={plugins:{legend:{position:"bottom"},tooltip:{backgroundColor:"white",titleColor:"black",bodyColor:"black",callbacks:{title:function(p){return`Th\xE1ng: ${p[0].label}`},labelTextColor:function(){return"#000"}}}},scales:{x:{grid:{display:!1}},y:{grid:{display:!0},position:"left",ticks:{callback:p=>{let d=typeof p=="number"?p:parseFloat(p);return d>=1e9?`${(d/1e9).toFixed(1)}B`:d>=1e6?`${(d/1e6).toFixed(1)}M`:d>=1e3?`${Math.floor(d/1e3)}K`:d.toString()}},title:{display:!0,text:"Doanh thu (VND)"}},y1:{grid:{display:!1},position:"right",ticks:{callback:function(p){return p}},title:{display:!0,text:"S\u1ED1 l\u01B0\u1EE3ng thanh kho\u1EA3n"}}}},this.barChartType="bar",this.barChartData={labels:[],datasets:[{type:"line",label:"S\u1ED1 l\u01B0\u1EE3ng giao d\u1ECBch",borderColor:"rgb(20, 24, 31)",borderWidth:2,fill:!1,tension:.4,pointBackgroundColor:"rgb(20, 24, 31)",data:[],yAxisID:"y1"},{type:"bar",label:"Doanh thu",backgroundColor:"#1890FF",data:[],borderColor:"white",borderRadius:{topLeft:40,topRight:40},borderSkipped:!1,barThickness:40}]},this.subscriptions=new we,this.userCurrent=this.storageService.get(H.currentUser)?JSON.parse(this.storageService.get(H.currentUser)):void 0}ngOnInit(){this.getRangeDate("month"),this.optionChooseDate$=this.store.select(Tn),this.labelData$=this.store.select(yn),this.transactionData$=this.store.select(Dn),this.revenueData$=this.store.select(En),this.subscriptions.add(this.labelData$.subscribe(t=>{this.barChartData.labels=t,this.refreshChart()})),this.subscriptions.add(this.transactionData$.subscribe(t=>{this.barChartData.datasets[0].data=t,this.refreshChart()})),this.subscriptions.add(this.revenueData$.subscribe(t=>{this.barChartData.datasets[1].data=t,this.refreshChart()}))}ngOnDestroy(){this.subscriptions.unsubscribe(),this.store.dispatch(jt())}};n.\u0275fac=function(e){return new(e||n)(C(Y),C(Z),C(pe))},n.\u0275cmp=A({type:n,selectors:[["app-revenue-statistic"]],viewQuery:function(e,r){if(e&1&&ae(G,5),e&2){let p;oe(p=se())&&(r.chart=p.first)}},decls:9,vars:4,consts:[[1,"bg-white","my-3","p-6","rounded-md"],[1,"flex","items-center","justify-between","mb-3"],[1,"font-semibold","text-[22px]"],[3,"chooseItemOption","defaultValue","optionSelect"],[1,"overflow-x-scroll","md:overflow-x-hidden"],[1,"min-w-[600px]"],["baseChart","",3,"data","options"]],template:function(e,r){e&1&&(a(0,"div",0)(1,"div",1)(2,"h3",2),l(3,"Th\u1ED1ng k\xEA doanh thu"),o(),a(4,"div")(5,"app-select-view-statistic",3),v("chooseItemOption",function(d){return r.getRangeDate(d)}),o()()(),a(6,"div",4)(7,"div",5),_(8,"canvas",6),o()()()),e&2&&(c(5),m("defaultValue","month")("optionSelect",r.chooseFollowDate),c(3),m("data",r.barChartData)("options",r.barChartOptions))},dependencies:[Ot,G]});let i=n;return i})();var na="[Dashboard overview] get data chart order",ra="[Dashboard overview] get data chart order success",aa="[Dashboard overview] get data chart order failure",oa="[Dashboard overview] get data chart order reset state",qe=w(na,V()),ct=w(ra,V()),pt=w(aa,V()),Yt=w(oa);var ut=Ke(Xe());var An={data:null,message:"",status:"idle"},sa=te(An,D(qe,(i,n)=>z(S({},i),{status:"loading"})),D(ct,(i,n)=>z(S({},i),{data:n.dataRes,message:n.message,status:"loaded"})),D(pt,(i,n)=>z(S({},i),{status:"error"})),D(Yt,(i,n)=>S({},An))),ni=ee({name:ie.dataChartOrder,reducer:sa}),{selectData:dt,selectStatus:rs,selectMessage:as}=ni,wn=N(dt,i=>!i||!Array.isArray(i)?[]:i.map(n=>`Th\xE1ng ${n.month} / ${n.year}`)),Rn=N(dt,i=>!i||!Array.isArray(i)?[]:i.map(n=>n.waitingForConfirm)),On=N(dt,i=>!i||!Array.isArray(i)?[]:i.map(n=>n.inProgress)),Mn=N(dt,i=>!i||!Array.isArray(i)?[]:i.map(n=>n.completed)),In=N(dt,i=>!i||!Array.isArray(i)?[]:i.map(n=>n.cancelled));var Vn=(()=>{let n=class n{getRangeDate(t){let e,r;t&&t.length!==0&&(e=(0,ut.default)(t[0]).startOf("month").format("YYYY-MM-DD"),r=(0,ut.default)(t[1]).endOf("month").format("YYYY-MM-DD"),this.loadData({StartDate:e,EndDate:r}))}handleDateChange(t){console.log("Line152",t),this.getRangeDate(t)}loadData(t){if(this.userCurrent){let e=S({RentaiShopId:this.userCurrent.RentalShopId},t);this.store.dispatch(qe({bodyReq:e}))}}refreshChart(){this.chart&&this.chart.update()}getCurrentAndLast12MonthsDate(){let t=new Date,e=new Date;return e.setMonth(e.getMonth()-12),{StartDate:(0,ut.default)(e).startOf("month").format("YYYY-MM-DD"),EndDate:(0,ut.default)(t).endOf("month").format("YYYY-MM-DD")}}constructor(t,e){this.store=t,this.storageService=e,this.barCharOptions={responsive:!0,scales:{x:{title:{display:!1},grid:{display:!1}},y:{title:{display:!0,text:"S\u1ED1 l\u01B0\u1EE3ng \u0111\u01A1n h\xE0ng"},border:{dash:[4,4]},grid:{color:"#aaa",tickColor:"#000",tickWidth:2,offset:!0,drawTicks:!1,drawOnChartArea:!0},ticks:{maxTicksLimit:9,font:{size:15}}}},plugins:{legend:{display:!0,position:"bottom"},tooltip:{backgroundColor:"white",titleColor:"black",bodyColor:"black",callbacks:{title:function(r){return`Th\xE1ng: ${r[0].label}`},labelTextColor:function(){return"#000"}}}}},this.barChartType="bar",this.barChartData={labels:[],datasets:[{data:[],label:"Ch\u1EDD x\u1EED l\xFD",backgroundColor:"rgba(253,233,165,1)",borderWidth:1,borderRadius:{topLeft:40,topRight:40}},{data:[],label:"\u0110ang x\u1EED l\xFD",backgroundColor:"rgba(170, 215, 232, 1)",borderWidth:1,borderRadius:{topLeft:40,topRight:40}},{data:[],label:"Ho\xE0n th\xE0nh",backgroundColor:"rgba(184,237,190,1)",borderWidth:1,borderRadius:{topLeft:40,topRight:40}},{data:[],label:"\u0110\xE3 h\u1EE7y",backgroundColor:"rgba(247, 169, 185, 1)",borderWidth:1,borderRadius:{topLeft:40,topRight:40}}]},this.subscriptions=new we,this.userCurrent=this.storageService.get(H.currentUser)?JSON.parse(this.storageService.get(H.currentUser)):void 0}ngOnInit(){this.loadData(this.getCurrentAndLast12MonthsDate()),this.labelData$=this.store.select(wn),this.waittingData$=this.store.select(Rn),this.inProcessData$=this.store.select(On),this.completedData$=this.store.select(Mn),this.cancelData$=this.store.select(In),this.subscriptions.add(this.labelData$.subscribe(t=>{this.barChartData.labels=t,this.refreshChart()})),this.subscriptions.add(this.waittingData$.subscribe(t=>{this.barChartData.datasets[0].data=t,this.refreshChart()})),this.subscriptions.add(this.inProcessData$.subscribe(t=>{this.barChartData.datasets[1].data=t,this.refreshChart()})),this.subscriptions.add(this.completedData$.subscribe(t=>{this.barChartData.datasets[2].data=t,this.refreshChart()})),this.subscriptions.add(this.cancelData$.subscribe(t=>{this.barChartData.datasets[3].data=t,this.refreshChart()}))}ngOnDestroy(){this.subscriptions.unsubscribe(),this.store.dispatch(Yt())}};n.\u0275fac=function(e){return new(e||n)(C(Y),C(Z))},n.\u0275cmp=A({type:n,selectors:[["app-order-statistic"]],viewQuery:function(e,r){if(e&1&&ae(G,5),e&2){let p;oe(p=se())&&(r.chart=p.first)}},decls:10,vars:4,consts:[[1,"bg-white","p-6","rounded-md"],[1,"mb-3"],[1,"font-semibold","text-[22px]"],[1,"flex","item-center","justify-between","my-3"],[1,"flex","items-center","gap-x-3"],["nzSize","default",3,"onFilterDate","nzMode"],[1,"overflow-x-scroll","md:overflow-x-hidden"],[1,"min-w-[600px]"],["baseChart","",2,"width","100%",3,"data","type","options"]],template:function(e,r){e&1&&(a(0,"div",0)(1,"div",1)(2,"h3",2),l(3,"Th\u1ED1ng k\xEA \u0111\u01A1n h\xE0ng"),o(),a(4,"div",3),_(5,"div",4),a(6,"app-select-date-range",5),v("onFilterDate",function(d){return r.handleDateChange(d)}),o()()(),a(7,"div",6)(8,"div",7),_(9,"canvas",8),o()()()),e&2&&(c(6),m("nzMode","month"),c(3),m("data",r.barChartData)("type",r.barChartType)("options",r.barCharOptions))},dependencies:[Yi,G]});let i=n;return i})();var kn=(()=>{let n=class n{constructor(){this.components=[Ht,Ut],this.slideConfig={slidesToShow:1,slidesToScroll:1,autoplaySpeed:2e3,arrows:!1}}ngOnInit(){}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=A({type:n,selectors:[["app-overview"]],decls:10,vars:0,consts:[[1,"py-5"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-3"],[1,""],[1,"grid","grid-cols-3","gap-3"],[1,"col-span-3"]],template:function(e,r){e&1&&(a(0,"div",0),_(1,"app-card-overview"),a(2,"div",1)(3,"div",2),_(4,"app-revenue-statistic"),o(),a(5,"div"),_(6,"app-sub-category-statistic"),o()(),a(7,"div",3)(8,"div",4),_(9,"app-order-statistic"),o()()())},dependencies:[hn,Ut,Ht,Vn],styles:[".slick-track{height:650px!important}  .slick-list{max-height:100%!important}"]});let i=n;return i})();var ca=()=>({x:"1920"});function pa(i,n){if(i&1&&_(0,"nz-option",8),i&2){let s=n.$implicit;m("nzValue",s.value)("nzLabel",s.label)}}function da(i,n){if(i&1){let s=E();a(0,"tr",17),v("click",function(e){return g(s),f(e.stopPropagation())}),a(1,"td",18),Q("nzCheckedChange",function(e){g(s);let r=h();return K(r.allChecked,e)||(r.allChecked=e),f(e)}),v("nzCheckedChange",function(){g(s);let e=h();return f(e.refreshStatus())}),o(),a(2,"td",12),l(3),o(),a(4,"td",13),l(5),o(),a(6,"td",14),l(7),o(),a(8,"td",19),l(9),a(10,"div",20)(11,"button",21),_(12,"span",22),l(13," \u0110\xE1nh d\u1EA5u \u0111\xE3 \u0111\u1ECDc "),o(),a(14,"button",23),_(15,"span",24),l(16," X\xF3a "),o()()()()}if(i&2){let s=n.$implicit,t=h();c(),m("nzLeft",t.fixedColumn),q("nzChecked",t.allChecked),m("nzIndeterminate",t.indeterminate),c(2),R(s.title),c(2),R(s.content),c(2),R(s.time),c(2),b(" ",s.status," ")}}function ua(i,n){i&1&&(a(0,"div",25),l(1," Hi\u1EC3n th\u1ECB th\u1EE9 t\u1EF1 1- 10 trong 20 k\u1EBFt qu\u1EA3 "),o())}var Nn=(()=>{let n=class n{constructor(){this.listData=ha,this.listOptionViewNotification=ma,this.allChecked=!1,this.indeterminate=!1,this.fixedColumn=!1,this.displayData=[],this.selectValue=new Ti("today"),this.customColumn=[{name:"T\xEAn th\xF4ng b\xE1o",default:!0,value:"titleThongBao",width:300,fixWidth:!0,position:"left"},{name:"N\u1ED9i dung th\xF4ng b\xE1o",default:!0,value:"contentThongBao",width:300,fixWidth:!0,position:"left"},{name:"Th\u1EDDi gian",default:!0,value:"dateThongBao",width:300,fixWidth:!0,position:"left"},{name:"Tr\u1EA1ng th\xE1i th\xF4ng b\xE1o",default:!0,value:"statusThongBao",width:500,fixWidth:!0,position:"left"}]}onPageSizeChange(t){}onPageIndexChange(t){}refreshStatus(){let t=this.displayData.filter(p=>!p.disabled),e=t.length>0&&t.every(p=>p.checked===!0),r=t.every(p=>!p.checked);this.allChecked=e,this.indeterminate=!e&&!r}checkAll(t){this.displayData.forEach(e=>{e.disabled||(e.checked=t)}),this.refreshStatus()}};n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=A({type:n,selectors:[["app-manage-notification"]],decls:28,vars:17,consts:[["basicTable",""],["showTotal",""],[1,"my-3"],[1,"bg-white","p-5","flex","items-center","justify-between","rounded-md"],[1,"flex","items-center","gap-x-3"],[1,"text-xl","text-[#111]"],["nz-button","","nzType","primary"],[1,"w-[150px]",3,"formControl"],[3,"nzValue","nzLabel"],[1,"my-3","bg-white","p-5","rounded-md"],["nzFrontPagination","false","nzShowSizeChanger","true",3,"nzPageIndexChange","nzPageSizeChange","nzCustomColumn","nzScroll","nzData","nzBordered","nzPaginationPosition","nzShowPagination","nzShowTotal","nzPageIndex","nzTotal","nzPageSize"],["nzWidth","60px",3,"nzCheckedChange","nzChecked","nzLeft","nzIndeterminate"],["nzCellControl","titleThongBao"],["nzCellControl","contentThongBao"],["nzCellControl","dateThongBao"],["nzCellControl","statusThongBao"],["class","tr_row",3,"click",4,"ngFor","ngForOf"],[1,"tr_row",3,"click"],["nzWidth","60px",3,"nzCheckedChange","nzLeft","nzChecked","nzIndeterminate"],["nzCellControl","statusThongBao",1,"flex","items-center","gap-x-3"],[1,"action","flex","items-center","gap-x-2"],["nz-button","","nzType","link"],["nz-icon","","nzType","check","nzTheme","outline"],["nz-button","","nzType","link","nz-popconfirm","","nzPopconfirmTitle","X\xF3a th\xF4ng b\xE1o n\xE0y?","nzPopconfirmPlacement","right",1,"text-red-500"],["nz-icon","","nzType","close","nzTheme","outline"],[1,"text-[14px]","font-medium","text-[#333]"]],template:function(e,r){if(e&1){let p=E();a(0,"div",2)(1,"div",3)(2,"div",4)(3,"h3",5),l(4,"Danh s\xE1ch th\xF4ng b\xE1o"),o(),a(5,"button",6),l(6,"Xo\xE1 t\u1EA5t c\u1EA3"),o()(),a(7,"nz-select",7),Ct(8,pa,1,2,"nz-option",8,ft),o()(),a(10,"section",9)(11,"nz-table",10,0),v("nzPageIndexChange",function(u){return g(p),f(r.onPageIndexChange(u))})("nzPageSizeChange",function(u){return g(p),f(r.onPageSizeChange(u))}),a(13,"thead")(14,"tr")(15,"th",11),Q("nzCheckedChange",function(u){return g(p),K(r.allChecked,u)||(r.allChecked=u),f(u)}),v("nzCheckedChange",function(u){return g(p),f(r.checkAll(u))}),o(),a(16,"th",12),l(17,"T\xEAn th\xF4ng b\xE1o"),o(),a(18,"th",13),l(19,"N\u1ED9i dung th\xF4ng b\xE1o"),o(),a(20,"th",14),l(21,"Th\u1EDDi gian"),o(),a(22,"th",15),l(23,"Tr\u1EA1ng th\xE1i th\xF4ng b\xE1o"),o()()(),a(24,"tbody"),x(25,da,17,7,"tr",16),o()()()(),x(26,ua,2,0,"ng-template",null,1,F)}if(e&2){let p=I(12),d=I(27);c(7),m("formControl",r.selectValue),c(),vt(r.listOptionViewNotification),c(3),m("nzCustomColumn",r.customColumn)("nzScroll",Oe(16,ca))("nzData",r.listData)("nzData",r.listData)("nzBordered",!0)("nzPaginationPosition","bottom")("nzShowPagination",!0)("nzShowTotal",d)("nzPageIndex",1)("nzTotal",r.listData.length)("nzPageSize",10),c(4),q("nzChecked",r.allChecked),m("nzLeft",r.fixedColumn)("nzIndeterminate",r.indeterminate),c(10),m("ngForOf",p.data)}},dependencies:[X,Pe,yi,Wi,ke,J,Ve,he,_e,fe,Ce,Ii,xe,ve,Se,Le,Be,Vi,Et,Dt],styles:[".tr_row[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{opacity:0;transition:opacity .2s ease-in-out}.tr_row[_ngcontent-%COMP%]:hover   .action[_ngcontent-%COMP%], .tr_row[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]   .nz-popconfirm-open[_ngcontent-%COMP%] ~ .action[_ngcontent-%COMP%]{opacity:1}"]});let i=n;return i})(),ma=[{label:"H\xF4m nay",value:"today"},{label:"7 ng\xE0y tr\u01B0\u1EDBc",value:"7daylater"},{label:"14 ng\xE0y tr\u01B0\u1EDBc",value:"14daylater"}],ha=[{id:1,title:"C\u1EADp nh\u1EADt: Phi\xEAn b\u1EA3n m\u1EDBi \u0111\xE3 ra m\u1EAFt",content:"Phi\xEAn b\u1EA3n 2.0 c\xF3 th\xEAm nhi\u1EC1u t\xEDnh n\u0103ng v\xE0 c\u1EA3i ti\u1EBFn hi\u1EC7u su\u1EA5t.",time:"10 ph\xFAt tr\u01B0\u1EDBc",status:"unread"},{id:2,title:"Khuy\u1EBFn m\xE3i: Gi\u1EA3m gi\xE1 50% cho \u0111\u01A1n h\xE0ng \u0111\u1EA7u ti\xEAn",content:"Ch\u01B0\u01A1ng tr\xECnh \xE1p d\u1EE5ng t\u1EEB ng\xE0y 22/11 \u0111\u1EBFn 30/11. \u0110\u1EEBng b\u1ECF l\u1EE1!",time:"1 gi\u1EDD tr\u01B0\u1EDBc",status:"read"},{id:3,title:"Th\xF4ng b\xE1o: B\u1EA3o tr\xEC h\u1EC7 th\u1ED1ng",content:"H\u1EC7 th\u1ED1ng s\u1EBD b\u1EA3o tr\xEC v\xE0o l\xFAc 3h s\xE1ng ng\xE0y 25/11.",time:"2 gi\u1EDD tr\u01B0\u1EDBc",status:"unread"},{id:4,title:"Ch\xE0o m\u1EEBng b\u1EA1n \u0111\u1EBFn v\u1EDBi h\u1EC7 th\u1ED1ng",content:"H\xE3y kh\xE1m ph\xE1 c\xE1c t\xEDnh n\u0103ng tuy\u1EC7t v\u1EDDi c\u1EE7a ch\xFAng t\xF4i!",time:"H\xF4m qua",status:"read"},{id:5,title:"C\u1EADp nh\u1EADt: Th\xEAm t\xEDnh n\u0103ng theo d\xF5i \u0111\u01A1n h\xE0ng",content:"B\xE2y gi\u1EDD b\u1EA1n c\xF3 th\u1EC3 theo d\xF5i tr\u1EA1ng th\xE1i \u0111\u01A1n h\xE0ng c\u1EE7a m\xECnh theo th\u1EDDi gian th\u1EF1c.",time:"H\xF4m qua",status:"unread"},{id:6,title:"Th\xF4ng b\xE1o: \u0110\u0103ng nh\u1EADp th\xE0nh c\xF4ng",content:"B\u1EA1n \u0111\xE3 \u0111\u0103ng nh\u1EADp th\xE0nh c\xF4ng v\xE0o h\u1EC7 th\u1ED1ng. Ch\xFAc b\u1EA1n m\u1ED9t ng\xE0y t\u1ED1t l\xE0nh!",time:"2 ng\xE0y tr\u01B0\u1EDBc",status:"read"},{id:7,title:"L\u1EDDi nh\u1EAFc: Ho\xE0n th\xE0nh h\u1ED3 s\u01A1 c\u1EE7a b\u1EA1n",content:"Vui l\xF2ng ho\xE0n th\xE0nh h\u1ED3 s\u01A1 \u0111\u1EC3 nh\u1EADn \u0111\u01B0\u1EE3c nhi\u1EC1u \u01B0u \u0111\xE3i h\u01A1n.",time:"3 ng\xE0y tr\u01B0\u1EDBc",status:"unread"},{id:8,title:"Khuy\u1EBFn m\xE3i: Mi\u1EC5n ph\xED v\u1EADn chuy\u1EC3n",content:"\xC1p d\u1EE5ng cho \u0111\u01A1n h\xE0ng tr\xEAn 500k t\u1EEB ng\xE0y 20/11 \u0111\u1EBFn 30/11.",time:"4 ng\xE0y tr\u01B0\u1EDBc",status:"read"},{id:9,title:"C\u1EADp nh\u1EADt: H\u1ED7 tr\u1EE3 th\xEAm ph\u01B0\u01A1ng th\u1EE9c thanh to\xE1n",content:"Gi\u1EDD \u0111\xE2y b\u1EA1n c\xF3 th\u1EC3 thanh to\xE1n qua v\xED \u0111i\u1EC7n t\u1EED Momo v\xE0 ZaloPay.",time:"1 tu\u1EA7n tr\u01B0\u1EDBc",status:"unread"},{id:10,title:"Th\xF4ng b\xE1o: C\u1EA3m \u01A1n b\u1EA1n \u0111\xE3 s\u1EED d\u1EE5ng d\u1ECBch v\u1EE5",content:"Ch\xFAng t\xF4i r\u1EA5t tr\xE2n tr\u1ECDng s\u1EF1 \u1EE7ng h\u1ED9 c\u1EE7a b\u1EA1n.",time:"2 tu\u1EA7n tr\u01B0\u1EDBc",status:"read"}];var ga=[{path:"dashboard",component:kn,title:"Th\xF4\u0301ng K\xEA | ERMS"},{path:"shop/:id",component:cn,title:"Qua\u0309n Ly\u0301 C\u01B0\u0309a Ha\u0300ng Cu\u0309a T\xF4i | ERMS"},{path:"order",component:Ji,title:"Qua\u0309n Ly\u0301 \u0110\u01A1n Ha\u0300ng | ERMS"},{path:"order/:id",component:on,title:"Chi Ti\xEA\u0301t \u0110\u01A1n Ha\u0300ng | ERMS"},{path:"voucher",component:sn,title:"Qua\u0309n Ly\u0301 Voucher | ERMS"},{path:"notification",component:Nn,title:"Th\xF4ng Ba\u0301o | ERMS"}],Pn=(()=>{let n=class n{};n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=gt({type:n}),n.\u0275inj=ht({imports:[Wt.forChild(ga),Wt]});let i=n;return i})();var $t=(()=>{let n=class n{constructor(t){this.httpClient=t}getCardOverview(t){return this.httpClient.get("Statistical/StatisticProduct",t)}getDataChartTopSubCategory(t){return this.httpClient.get("Statistical/table1",t)}getDataChartRevenue1(t){return this.httpClient.get("Statistical/table2ByMonth",t)}getDataChartRevenue2(t){return this.httpClient.get("Statistical/table2ByWeek",t)}getDataChartOrder(t){return this.httpClient.get("Statistical/table3",t)}};n.\u0275fac=function(e){return new(e||n)(M(zi))},n.\u0275prov=ce({token:n,factory:n.\u0275fac,providedIn:"root"});let i=n;return i})();var Bn=(()=>{let n=class n{constructor(t,e,r,p){this.actions$=t,this.loadingService=e,this.dashboardLessorService=r,this.nzToastMessage=p,this.processGetCardOverview$=L(()=>this.actions$.pipe(B(Ye),O(()=>this.loadingService.setLoading()),Re(({bodyReq:d})=>this.dashboardLessorService.getCardOverview(d).pipe(U(({data:u})=>nt({dataRes:u,message:"Th\xE0nh c\xF4ng l\u1EA5y d\u1EEF li\u1EC7u"})),ne(u=>(console.log(u,"err"),k(rt({message:"C\xF3 l\u1ED7i trong qu\xE1 tr\xECnh l\u1EA5y d\u1EEF li\u1EC7u"}))))))),{dispatch:!0}),this.processGetCardOverview_success$=L(()=>this.actions$.pipe(B(nt),O(()=>{this.loadingService.setOtherLoading("loaded")})),{dispatch:!1}),this.processGetCardOverview_failure$=L(()=>this.actions$.pipe(B(rt),O(({message:d})=>{this.loadingService.setOtherLoading("error"),this.nzToastMessage.error(d)})),{dispatch:!1})}};n.\u0275fac=function(e){return new(e||n)(M(He),M($),M($t),M(bt))},n.\u0275prov=ce({token:n,factory:n.\u0275fac});let i=n;return i})();var Un=(()=>{let n=class n{constructor(t,e,r,p){this.actions$=t,this.loadingService=e,this.dashboardLessorService=r,this.nzToastMessage=p,this.processGetDataChartTopSubCategory$=L(()=>this.actions$.pipe(B(Ae),O(()=>this.loadingService.setLoading()),Re(({bodyReq:d})=>this.dashboardLessorService.getDataChartTopSubCategory(d).pipe(U(({data:u})=>Lt({dataRes:u,message:"Th\xE0nh c\xF4ng l\u1EA5y d\u1EEF li\u1EC7u"})),ne(u=>(console.error(u,"err"),k(ot({message:"C\xF3 l\u1ED7i trong qu\xE1 tr\xECnh l\u1EA5y d\u1EEF li\u1EC7u"}))))))),{dispatch:!0}),this.processGetDataChartRevenue$=L(()=>this.actions$.pipe(B($e),O(()=>this.loadingService.setLoading()),Re(({bodyReq:d,typeOption:u})=>u==="m"?this.dashboardLessorService.getDataChartRevenue1(d).pipe(U(({data:y})=>Ge({dataRes:y,message:"Th\xE0nh c\xF4ng l\u1EA5y d\u1EEF li\u1EC7u"})),ne(y=>(console.error(y,"err"),k(We({message:"C\xF3 l\u1ED7i trong qu\xE1 tr\xECnh l\u1EA5y d\u1EEF li\u1EC7u"}))))):this.dashboardLessorService.getDataChartRevenue2(d).pipe(U(({data:y})=>Ge({dataRes:y,message:"Th\xE0nh c\xF4ng l\u1EA5y d\u1EEF li\u1EC7u"})),ne(y=>(console.error(y,"err"),k(We({message:"C\xF3 l\u1ED7i trong qu\xE1 tr\xECnh l\u1EA5y d\u1EEF li\u1EC7u"}))))))),{dispatch:!0}),this.processGetDataChartOrder$=L(()=>this.actions$.pipe(B(qe),O(()=>this.loadingService.setLoading()),Re(({bodyReq:d})=>this.dashboardLessorService.getDataChartOrder(d).pipe(U(({data:u})=>ct({dataRes:u,message:"Th\xE0nh c\xF4ng l\u1EA5y d\u1EEF li\u1EC7u"})),ne(u=>(console.error(u,"err"),k(pt({message:"C\xF3 l\u1ED7i trong qu\xE1 tr\xECnh l\u1EA5y d\u1EEF li\u1EC7u"}))))))),{dispatch:!0}),this.processGetChart_success$=L(()=>this.actions$.pipe(B(ct,Ge,Ae),O(()=>{this.loadingService.setOtherLoading("loaded")})),{dispatch:!1}),this.processGetChart_failure$=L(()=>this.actions$.pipe(B(pt,We,ot),O(({message:d})=>{this.loadingService.setOtherLoading("error"),this.nzToastMessage.error(d)})),{dispatch:!1})}};n.\u0275fac=function(e){return new(e||n)(M(He),M($),M($t),M(bt))},n.\u0275prov=ce({token:n,factory:n.\u0275fac});let i=n;return i})();var jn=(()=>{let n=class n{constructor(t,e,r,p){this.actions$=t,this.loadingService=e,this.messageResponseMS=r,this.orderService=p,this.processOrderDetail$=L(()=>this.actions$.pipe(B(je),O(()=>this.loadingService.setLoading()),mt(({pid:d})=>this.orderService.getOrderDetailLessor(d).pipe(U(({data:u,message:y})=>Je({data:u,message:y})),ne(u=>k(Ze({errMessage:"c\xF3 l\u1ED7i x\u1EA3y ra trong qu\xE1 tr\xECnh hi\u1EC3n th\u1ECB"})))))),{dispatch:!0}),this.processOrderDetail_success$=L(()=>this.actions$.pipe(B(Je),O(()=>{this.loadingService.setOtherLoading("loaded")})),{dispatch:!1}),this.processOrderDetail_failure$=L(()=>this.actions$.pipe(B(Ze),O(({errMessage:d})=>{this.loadingService.setOtherLoading("error"),this.messageResponseMS.handleError(d)})),{dispatch:!1})}};n.\u0275fac=function(e){return new(e||n)(M(He),M($),M(ge),M(Ue))},n.\u0275prov=ce({token:n,factory:n.\u0275fac});let i=n;return i})();var yl=(()=>{let n=class n{};n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=gt({type:n}),n.\u0275inj=ht({imports:[Pn,ui,Ne.forFeature(ei),Ne.forFeature(ni),Ne.forFeature(ii),Ne.forFeature(ti),Ne.forFeature(Xt),Mt.forFeature([Bn]),Mt.forFeature([Un]),Mt.forFeature([jn]),qi]});let i=n;return i})();export{yl as LessorModule};
